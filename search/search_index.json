{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"AUREA \u2014 Documenta\u00e7\u00e3o Definitiva Data: 2026-02-19 \u00b7 Vers\u00e3o: 1.0 (MVP) \u00b7 Owner: Dan Este reposit\u00f3rio cont\u00e9m a documenta\u00e7\u00e3o fonte de verdade do projeto AUREA. Estruturado para onboarding r\u00e1pido, auditoria e opera\u00e7\u00e3o. Documento-base can\u00f4nico: ProjetoFinal.md . Os demais documentos detalham/operacionalizam esse baseline. \u00cdndice r\u00e1pido ProjetoFinal.md \u2014 baseline can\u00f4nico do projeto charter/project_charter.md \u2014 vis\u00e3o e termo de abertura sow/statement_of_work.md \u2014 declara\u00e7\u00e3o de escopo e entreg\u00e1veis prd/prd.md \u2014 requisitos de produto architecture/overview.md \u2014 vis\u00e3o, APIs, OC (LLM) adr/ADR-001-canonical-json.md \u2014 decis\u00f5es arquiteturais security/security_privacy.md \u2014 seguran\u00e7a e privacidade compliance/compliance.md \u2014 pol\u00edticas e publica\u00e7\u00e3o runbook/operations.md \u2014 opera\u00e7\u00e3o, incidentes e backup qa/strategy.md \u2014 testes, determinismo e chaos slo/slis_slos.md \u2014 SLIs/SLOs e m\u00e9tricas ux/plan_card_spec.md \u2014 PlanCard, microcopy e i18n interop/ro_crate_mapping.md \u2014 RO-Crate e refer\u00eancias de dados governance/contributing.md \u2014 contribui\u00e7\u00e3o, conduta e licen\u00e7a templates/ISSUE_TEMPLATE.md \u2014 modelos de PR/Issue .aurea/README.md \u2014 plano de PRs em JSON (LLM-friendly)","title":"Home"},{"location":"#aurea-documentacao-definitiva","text":"Data: 2026-02-19 \u00b7 Vers\u00e3o: 1.0 (MVP) \u00b7 Owner: Dan Este reposit\u00f3rio cont\u00e9m a documenta\u00e7\u00e3o fonte de verdade do projeto AUREA. Estruturado para onboarding r\u00e1pido, auditoria e opera\u00e7\u00e3o. Documento-base can\u00f4nico: ProjetoFinal.md . Os demais documentos detalham/operacionalizam esse baseline.","title":"AUREA \u2014 Documenta\u00e7\u00e3o Definitiva"},{"location":"#indice-rapido","text":"ProjetoFinal.md \u2014 baseline can\u00f4nico do projeto charter/project_charter.md \u2014 vis\u00e3o e termo de abertura sow/statement_of_work.md \u2014 declara\u00e7\u00e3o de escopo e entreg\u00e1veis prd/prd.md \u2014 requisitos de produto architecture/overview.md \u2014 vis\u00e3o, APIs, OC (LLM) adr/ADR-001-canonical-json.md \u2014 decis\u00f5es arquiteturais security/security_privacy.md \u2014 seguran\u00e7a e privacidade compliance/compliance.md \u2014 pol\u00edticas e publica\u00e7\u00e3o runbook/operations.md \u2014 opera\u00e7\u00e3o, incidentes e backup qa/strategy.md \u2014 testes, determinismo e chaos slo/slis_slos.md \u2014 SLIs/SLOs e m\u00e9tricas ux/plan_card_spec.md \u2014 PlanCard, microcopy e i18n interop/ro_crate_mapping.md \u2014 RO-Crate e refer\u00eancias de dados governance/contributing.md \u2014 contribui\u00e7\u00e3o, conduta e licen\u00e7a templates/ISSUE_TEMPLATE.md \u2014 modelos de PR/Issue .aurea/README.md \u2014 plano de PRs em JSON (LLM-friendly)","title":"\u00cdndice r\u00e1pido"},{"location":"ProjetoFinal/","text":"\u00c1UREA \u2014 Projeto Final Plataforma 100% Rust para Ci\u00eancia Reprodut\u00edvel, VCX, Prot\u00f3tipos de Sil\u00edcio e Opera\u00e7\u00e3o Cr\u00edtica 0) Sum\u00e1rio executivo \u00c1UREA \u00e9 uma plataforma unificada, tipada e verific\u00e1vel para execu\u00e7\u00e3o de trabalhos cr\u00edticos com determinismo , recibos fortes e artefatos port\u00e1veis . Implementada integralmente em Rust, combina um bus de jobs com pol\u00edticas audit\u00e1veis , plugins nativos/WASI , empacotamento universal VCX-PACK e UI PWA . O desenho minimiza componentes e round-trips: um bin\u00e1rio principal serve API+UI, gerencia fila/leases, assina recibos e exp\u00f5e m\u00e9tricas; workers rodam in-proc por padr\u00e3o e out-of-proc /QUIC quando necess\u00e1rio. 1) Objetivos e resultados Determinismo e reprodutibilidade : replay bit-a-bit via seeds, clocks fixos, canonical JSON e KATs. Auditabilidade forte : recibos com NRF/CID, policy_trace , tempos por etapa e assinaturas ed25519. Tipagem ponta-a-ponta : contratos Rust \u2192 JSON Schema \u2192 valida\u00e7\u00e3o de payloads/results \u2192 UI auto-gerada. Opera\u00e7\u00e3o cr\u00edtica : quotas r\u00edgidas, PII/local-only, janelas, DUAL_CONTROL, \u00e2ncoras Merkle. Portabilidade de artefatos : VCX-PACK com manifesto/\u00edndices/hashes/verify. TCO baixo : tudo Rust, sem SaaS de cola; um bin\u00e1rio opera API, fila e observabilidade. 2) Escopo Dom\u00ednios de primeira classe: Ci\u00eancia reprodut\u00edvel (WASI/bin, KATs). VCX (imagem/\u00e1udio/v\u00eddeo, AV1, tempos por etapa). HDL (gera\u00e7\u00e3o Rust\u2192HDL, simula\u00e7\u00e3o determin\u00edstica, VCD). Operadores sem\u00e2nticos (Text\u2192JSON schema-driven; RAG tipado). 3) Arquitetura (enxuta) 3.1 Componentes aurea-bin (\u00fanico bin\u00e1rio) API/Bus : HTTP/3 (QUIC) + HTTP/1.1 fallback; SSE para stream. UI PWA (Axum + Leptos): forms e viewers gerados por schema. Fila/Leases : redb ACID; reassign autom\u00e1tico. Policies : fun\u00e7\u00f5es puras compiladas; policy_trace no recibo. Assinaturas : ed25519 (chaves geridas pelo servi\u00e7o; kid rotativo). Observabilidade : Prometheus + exports Arrow/Parquet; \u00e2ncoras Merkle di\u00e1rias. Plugins (in-proc por padr\u00e3o; WASI/out-of-proc via QUIC quando requerido): exp_runner , exp_ingest , vcx_worker , hdl_codegen , hdl_sim , op_llm_json , op_rag , notify . 3.2 Fluxo de alto n\u00edvel Cliente envia WorkUnit<T> \u2192 API valida schema/idempot\u00eancia \u2192 accepted . Scheduler aplica policies \u2192 enfileira \u2192 adquire lease \u2192 despacha handler (plugin). Handler emite progress (tempos por etapa), produz artefatos (VCX-PACK), retorna result . Servi\u00e7o gera Receipt (hashes, trace, tempos), assina e ancora (Merkle opcional). Cliente acompanha por stream e consulta recibos via /v1/receipts/{cid} . 4) Contratos de dados 4.1 Tipos principais (Rust \u2192 JSON Schema) WorkUnit<T> ; WorkResult<R> ; Receipt ; Metrics ; Signature ; PolicyEntry ; ArtifactRef . NRF/CID : cid = blake3(canonical_json(value)) . Idempot\u00eancia : (tenant, topic, idem_key) ; se ausente, idem_key = blake3(payload_canon) . 4.2 Versionamento e interoperabilidade @type , @id (uuid) , @ver , @world . schema_id / schema_v gravados no recibo; semver estrito ; Schemas publicados pelo servi\u00e7o. 5) API e protocolo 5.1 HTTP/3 (QUIC) e SSE POST /v1/work \u2192 enfileira WorkUnit<T> ; responde {status, receipt_cid} . GET /v1/stream?topic=...&tenant=...&id=... (SSE) \u2192 eventos accepted|assigned|progress|done|error . GET /v1/receipts/{cid} \u2192 Receipt . GET /v1/schema/{schema_id}/{v} \u2192 JSON Schema. POST /v1/verify/pack \u2192 valida VCX-PACK (hashes/manifest/entries). GET /v1/metrics (Prometheus). POST /v1/export?format=parquet|arrow \u2192 dump incremental. 5.2 QUIC (workers/out-of-proc) Frames (bidi stream): worker.hello{worker_id, capacity, capabilities[]} job.assign{work_unit} / job.progress{stage, t_ms} / job.result{result} / job.fail{err} job.heartbeat{lease_id} Leases: Tabelas ready(topic) , leased(topic) com lease_ttl_ms . Reassign em expira\u00e7\u00e3o. 6) Policies (compile-time, audit\u00e1veis) Trait: pub trait Policy { fn evaluate(&self, work: &WorkUnit<serde_json::Value>) -> Decision; } pub struct Decision { pub route: Route, pub budgets: Quotas, pub trace: Vec<PolicyEntry> } Exemplos: quotas_chat : topic.starts_with(\"chat:\") \u2192 tokens<=4000 . pii_local : pii_detected(payload) \u2192 route(LocalOnly) . commitment : topic.ends_with(\":commit\") \u2192 require(DUAL_CONTROL) . policy_trace sempre gravado em Receipt . 7) VCX-PACK (artefatos) Formato : manifesto + \u00edndice + trailer; entradas com path , sha , size . CID do pack : blake3(manifest_json) . Lifecycle integrado : runtime exp\u00f5e pack_begin/pack_add/pack_close e preenche receipt.artifacts[] . Verify : endpoint/CLI valida offsets, hashes e consist\u00eancia. 8) Determinismo e reprodutibilidade Seeds fixos, TZ=UTC, rel\u00f3gios simulados quando necess\u00e1rio. Canonical JSON p/ hashing e idempot\u00eancia. KATs : ingest/compare outputs com packs de refer\u00eancia. Isolamento de rede (policies) e vers\u00f5es travadas de libs. 9) Observabilidade e forense M\u00e9tricas: ttft_ms , ttr_ms , queue_depth , reassigns , error_rate , stage_time_ms{stage} . Exports Parquet/Arrow + DataFusion para an\u00e1lises. \u00c2ncoras Merkle di\u00e1rias dos recibos (root publicado em log/arquivo). 10) UI PWA (Axum + Leptos) Auto-forms a partir de JSON Schema dos contratos. Lista/Detalhe de Jobs e \ud83d\udcdc Recibo com policy_trace , hashes, tempos, artefatos (download/verify). Replay : bot\u00e3o que reenvia WorkUnit original (ou simula via VCX-PACK/seed). 11) Seguran\u00e7a e conformidade Assinaturas ed25519 on-by-default; rota\u00e7\u00e3o de chaves ( kid ). Pol\u00edticas para PII/local-only e DUAL_CONTROL em t\u00f3picos sens\u00edveis. Logs rotacionados; controle de reten\u00e7\u00e3o; snapshots peri\u00f3dicos. 12) Roadmap (90 dias) M1 \u2014 Funda\u00e7\u00e3o 1-bin\u00e1rio (D0\u2013D15) aurea serve (HTTP/3+SSE), redb, fila/leases, idempot\u00eancia por hash, schemas publicados, UI base. M2 \u2014 Recibos fortes + VCX (D16\u2013D35) Assinatura ed25519; tempos por etapa; VCX-PACK integrado + verify; UI \u201c\ud83d\udcdc Recibo\u201d. M3 \u2014 Dom\u00ednios (D36\u2013D65) exp_runner / exp_ingest (WASI/bin) + KATs; vcx_worker (resize\u2192AV1\u2192pack) com tempos; hdl_codegen / hdl_sim (VCD, asserts) e packs. M4 \u2014 Opera\u00e7\u00e3o cr\u00edtica e SRE (D66\u2013D90) Policies duras (PII/local-only, DUAL_CONTROL, janelas); M\u00e9tricas Prometheus, exports Parquet/Arrow; caos/staging; \u00e2ncoras Merkle. 13) Crit\u00e9rios de aceite Determinismo (Ci\u00eancia/HDL) : replay reproduz artefatos byte-a-byte (hashes id\u00eanticos). VCX : pipelines com tempos por etapa no recibo; verify() OK do pack. Sem\u00e2nticos : Text\u2192JSON v\u00e1lido no 1\u00ba ou 2\u00ba reparo; schema registrado no recibo. Opera\u00e7\u00e3o cr\u00edtica : SLOs (TTFT p95 \u2264 4s; TTR p95 \u2264 9s); reassign no lease expirado; DUAL_CONTROL efetivo. UI : PWA instal\u00e1vel; stream est\u00e1vel; \u201c\ud83d\udcdc Recibo\u201d completo. Assinaturas : todos recibos assinados; rota\u00e7\u00e3o de kid valid\u00e1vel. 14) Riscos & mitiga\u00e7\u00f5es AV1 CPU : presets ajust\u00e1veis; kernels wgpu para filtros; paraleliza\u00e7\u00e3o por GOP. Determinismo de libs : trave de vers\u00f5es; seeds; KATs regulares; modo \u201cno network\u201d. QUIC atr\u00e1s de proxies : fallback WS/443; keep-alive agressivo. Crescimento de estado : reten\u00e7\u00e3o configur\u00e1vel; snapshots Parquet/Arrow; \u00e2ncoras Merkle. 15) Implanta\u00e7\u00e3o e opera\u00e7\u00e3o Single binary : aurea serve --db ./aurea.redb --listen 0.0.0.0:8080 . Chaves : diret\u00f3rio keys/ com kid atual e hist\u00f3ricos; rota\u00e7\u00e3o di\u00e1ria/semanal. Config : TOML com policies, quotas, janelas e roteamento de t\u00f3picos. Backup : redb + snapshots de recibos/artefatos; exports peri\u00f3dicos Parquet/Arrow. 16) Testes e valida\u00e7\u00e3o Unit/integration para contratos, hashing can\u00f4nico, idempot\u00eancia e leases. KATs por dom\u00ednio (ci\u00eancia, VCX, HDL) com packs fixos. Fuzz/proptest para HDL sob feature=verify . Chaos em staging (lat\u00eancia/falhas controladas, reassign validado). 17) Governan\u00e7a e licen\u00e7a Apache-2.0 para n\u00facleo e plugins oficiais. Plugins privados por dom\u00ednio podem viver fora (respeitando contrato). Semver estrito ; schema_id/v carimbado em recibos; sem vers\u00f5es m\u00e1gicas . 18) Entreg\u00e1veis Bin\u00e1rio aurea (serve/worker/pack). Crates: core , storage , runtime , artifacts/vcx_pack , plugins/* . UI PWA integrada. Documenta\u00e7\u00e3o de API/Schema, guias de opera\u00e7\u00e3o e de compliance. Conjunto de KATs e packs de refer\u00eancia. 19) Exemplo de contrato e handler // Contrato #[derive(serde::Serialize, serde::Deserialize, schemars::JsonSchema)] pub struct VcxSpec { pub ops: Vec<VcxOp> } #[derive(serde::Serialize, serde::Deserialize, schemars::JsonSchema)] #[serde(tag=\"op\", rename_all=\"snake_case\")] pub enum VcxOp { Resize{w:u32,h:u32}, EncodeAv1{preset:u8} } // Handler #[work(topic=\"vcx:graph\")] fn vcx_graph(spec: VcxSpec, ctx: Ctx) -> anyhow::Result<VcxResult> { let mut pack = ctx.pack_begin(\"vcx-output\")?; let t0 = ctx.stage_start(\"resize\"); let img = resize(spec, ctx.inputs())?; ctx.stage_end(\"resize\", t0); let t1 = ctx.stage_start(\"encode_av1\"); let av1 = encode_av1(img, spec)?; ctx.stage_end(\"encode_av1\", t1); pack.add(\"out/video.ivf\", &av1)?; let pack_cid = ctx.pack_close(pack)?; Ok(VcxResult{ pack_cid }) } 20) Plano de ado\u00e7\u00e3o Lab piloto com ci\u00eancia reprodut\u00edvel e VCX simples. Expandir para HDL com VCD/netlists e KATs. Adicionar operadores sem\u00e2nticos com schemas de dom\u00ednio. Ativar policies duras e \u00e2ncoras em produ\u00e7\u00e3o. Pronto para constru\u00e7\u00e3o O esqueleto inicial j\u00e1 est\u00e1 dispon\u00edvel e compil\u00e1vel. Pr\u00f3xima a\u00e7\u00e3o recomendada: implementar M1 (idempot\u00eancia por hash, leases redb, UI forms por schema) no bin\u00e1rio \u00fanico e habilitar assinatura de recibos . Isso libera fluxos reais de ci\u00eancia/VCX/HDL com rastreabilidade completa. Prompt: Se o operador for um LLM que conversa com o humano e confirma a\u00e7\u00f5es, conseguimos por mais complexidade \"dentro\" pra ficar com ux humana mais livre? Response: Thought for 5s Sim \u2014 d\u00e1 para \u201centuchar\u201d bastante complexidade dentro do operador e manter a UX humana leve, desde que o LLM trabalhe sob contratos e fases . Abaixo est\u00e1 o padr\u00e3o que recomendo para o \u00c1UREA. Padr\u00e3o: Operador Conversacional (OC) Um plugin que conversa em linguagem natural e, por baixo, produz/valida WorkUnit<T> e WorkResult<R> contra schemas . Ele faz: entender inten\u00e7\u00e3o, preencher slots, planejar, simular (dry-run), pedir confirma\u00e7\u00e3o e s\u00f3 ent\u00e3o commit . Fases (de fora parece \u201cum chat\u201d, por dentro \u00e9 uma esteira) NL \u2192 Inten\u00e7\u00e3o + Slots Extra\u00e7\u00e3o para ActionDraft{action_id, slots, constraints, deadline?} Valida\u00e7\u00e3o imediata via JSON Schema do dom\u00ednio (reduz alucina\u00e7\u00e3o). Planejamento Gera um DAG de opera\u00e7\u00f5es (ex.: VCX \u2192 resize\u2192encode AV1\u2192pack). Estima custos/tempos (quotas) e pol\u00edticas aplic\u00e1veis (PII/local-only, DUAL_CONTROL, janela). Dry-run / Pr\u00e9-visualiza\u00e7\u00e3o Gera diff/preview do que vai acontecer: artefatos esperados, SLOs, custo estimado, impactos. Produz um Receipt ephemeral (n\u00e3o assinado) com policy_trace e or\u00e7amentos. Confirma\u00e7\u00e3o O OC pede um \u201cOK\u201d expl\u00edcito com frase de compromisso (ex.: confirm: \"DUAL_CONTROL\" quando o t\u00f3pico termina com :commit ). Idempot\u00eancia por hash do plano ( idem_key = blake3(dag_canon) ). Commit Emite WorkUnit definitivo para o t\u00f3pico de execu\u00e7\u00e3o ( vcx:graph , science:run , hdl:sim \u2026), assina recibo real, ancora (Merkle opcional). Stream \u00fanico: accepted \u2192 assigned \u2192 progress{\u2026} \u2192 result|fail . P\u00f3s-execu\u00e7\u00e3o OC agrega o Receipt e links de artefatos/VCX-PACK numa mensagem final, oferecendo Replay e Rollback (se aplic\u00e1vel). Para o usu\u00e1rio \u00e9 \u201cfale o que quer \u2192 veja um cart\u00e3o com o plano \u2192 confirme\u201d. Sem formulari\u00f5es; sem idas e vindas. Como isso \u201cesconde\u201d complexidade (com seguran\u00e7a) Schema-driven : o OC s\u00f3 prop\u00f5e a\u00e7\u00f5es que existem no registry de capacidades (schemas exportados pelos plugins). Slot-filling robusto : o LLM tenta preencher campos faltantes; se n\u00e3o couber no schema, ele auto-repara at\u00e9 N itera\u00e7\u00f5es. Pol\u00edticas antes da fila : pii_local pode reescrever o plano (trocar worker remoto por local) antes de enfileirar. Dois est\u00e1gios : :propose (ephemeral, barato) \u2192 :commit (assinado). Quotas expl\u00edcitas : o cart\u00e3o de confirma\u00e7\u00e3o sempre mostra tokens/time/custos e janelas (quando pode rodar). Idempot\u00eancia por plano : repetir \u201cOk, manda bala\u201d n\u00e3o duplica execu\u00e7\u00e3o. Audit trail : todo racioc\u00ednio externo vira policy_trace e m\u00e9tricas; o racioc\u00ednio interno n\u00e3o precisa ser exposto. Contratos m\u00ednimos (exemplos) // Pedido em linguagem natural \u2192 rascunho de a\u00e7\u00e3o #[derive(Serialize, Deserialize, JsonSchema)] pub struct ActionDraft { pub action_id: String, // ex.: \"vcx.batch_transcode\" pub slots: serde_json::Value, // j\u00e1 validado contra o schema do action_id pub constraints: Option<serde_json::Value>, pub deadline_utc: Option<String>, } // Plano/DAG proposto #[derive(Serialize, Deserialize, JsonSchema)] pub struct PlanPreview { pub dag: serde_json::Value, // DAG can\u00f4nico (ordenado) pub quotas: Quotas, // tokens/time/compute pub policy_trace: Vec<PolicyEntry>, // o que ser\u00e1 exigido pub estimated_ttft_ms: u32, pub estimated_ttr_ms: u32 } // Confirma\u00e7\u00e3o #[derive(Serialize, Deserialize, JsonSchema)] pub struct CommitRequest { pub plan_hash: String, // blake3(dag_canon) pub confirm_phrase: Option<String>, // ex.: \"DUAL_CONTROL\" } UX no chat (uma timeline, zero atrito) Mensagem do humano: \u201cConverte esses 20 v\u00eddeos pra 1080p, manda link pro time A at\u00e9 amanh\u00e3.\u201d OC responde com um card de plano : \u201cVou: extrair 20 itens da pasta X \u2192 resize(1920x1080) \u2192 encode_av1(preset 6) \u2192 pack \u2192 notify:teamA .\u201d SLOs e custos previstos, janelas/policies aplicadas. Bot\u00f5es: Confirmar , Editar (abre slots), Agendar . Ao confirmar, o stream mostra progresso por etapa; no fim, aparece \ud83d\udcdc Recibo (assinado) e Baixar VCX-PACK . Exemplos por dom\u00ednio VCX \u201cPadroniza pra 1080p e AV1, manda pro time A.\u201d \u2192 OC resolve slots (preset, CRF, FPS), verifica PII (n\u00e3o se aplica), estima TTR, pede confirma\u00e7\u00e3o, executa vcx:graph , anexa pack e envia notify . Ci\u00eancia reprodut\u00edvel \u201cReproduz o experimento X com seed 1337 e compara com refer\u00eancia.\u201d \u2192 OC monta ExperimentSpec , injeta seed, bloqueia rede se policy pedir, aciona exp_runner , depois exp_ingest (KAT). Entrega diff e recibo. HDL \u201cGera HDL do m\u00f3dulo Y, roda sim por 10k ciclos e me d\u00e1 VCD.\u201d \u2192 OC monta hdl_codegen + hdl_sim , fixa TZ/clock/seed, produz pack com VCD/netlist; confirma\u00e7\u00e3o inclui tempo/capacidade do worker. Controles que mant\u00eam tudo \u201clivre, mas seguro\u201d Lista branca de a\u00e7\u00f5es (capabilities do registry) \u2014 nada fora do contrato. Campos obrigat\u00f3rios sempre destacados no card; se o LLM n\u00e3o conseguir inferir, pede s\u00f3 o m\u00ednimo essencial. DUAL_CONTROL para t\u00f3picos *:commit . Local-only for\u00e7a workers locais automaticamente, sem o humano precisar saber. Dry-run econ\u00f4mico: nunca queima quota pesada antes do OK. Rollback/Replay direto no recibo. Como integrar no \u00c1UREA agora Registrar capacidades : cada plugin exp\u00f5e schema/action_id via endpoint ( /v1/schema/index ). Criar o OC no plugins/op_llm_json com tr\u00eas traits: Intent , Planner , Confirmer . Implementar :propose \u2192 :commit como dois t\u00f3picos internos (o primeiro n\u00e3o assina; o segundo assina). UI : componente Leptos PlanCard (renderiza a partir do PlanPreview ), com bot\u00f5es Confirmar/Editar/Agendar . Pol\u00edticas : hooks do OC chamam policy.evaluate() antes de enfileirar (aplica rota/quotas/local-only). Idempot\u00eancia : idem_key = blake3(dag_canon) no CommitRequest . Ganhos pr\u00e1ticos Menos idas e vindas : o OC resolve slots, valida e s\u00f3 te incomoda para o \u201cOK\u201d (ou um campo cr\u00edtico). Erros precocemente baratos : problemas aparecem no dry-run (policies, quotas, prazos). Risco controlado : nada roda \u201cde verdade\u201d sem confirma\u00e7\u00e3o, recibos s\u00e3o assinados e audit\u00e1veis. Mesma UX para tudo : VCX, ci\u00eancia e HDL se comportam como \u201cconversas com cart\u00f5es\u201d. Se quiser, eu j\u00e1 adapto o op_llm_json do esqueleto para incluir Intent \u2192 PlanPreview \u2192 Commit e te deixo um exemplo real de VCX batch com card de confirma\u00e7\u00e3o e idempot\u00eancia por hash do plano. Prompt: Esse \u00e9 o plano! Formalizar deixando o interior tb LLM friendly Response: Perfeito. Abaixo est\u00e1 a Especifica\u00e7\u00e3o V1 \u2014 \u00c1UREA com interior LLM-friendly , formalizando interfaces, contratos e o Operador Conversacional (OC) para que a UX seja \u201cfale\u2192confirme\u2192execute\u201d, enquanto o interior continua 100% tipado, verific\u00e1vel e seguro. 1) Princ\u00edpios LLM-friendly Tudo \u00e9 Schema : cada a\u00e7\u00e3o publica JSON Schema (+ exemplos) e um \u201ctool spec\u201d claro para LLMs. Dois est\u00e1gios : :propose (barato, ephemero, sem efeitos) \u2192 :commit (executa, assina, ancora). Idempot\u00eancia por plano : idem_key = blake3(dag_canon) . Repetir \u201cOK\u201d n\u00e3o duplica execu\u00e7\u00e3o. Auto-reparo limitado : OC tenta reparar JSON inv\u00e1lido at\u00e9 N=2 itera\u00e7\u00f5es; depois pede 1 campo humano. Privacidade de racioc\u00ednio : sem exigir cadeia de pensamento; OC retorna apenas dados estruturados + justificativas curtas. Pol\u00edticas antes da fila : DUAL_CONTROL/PII/local-only aplicadas no :propose , com tra\u00e7o explicativo no preview. 2) Registro de Capacidades (Capability Registry) Endpoint: GET /v1/capabilities { \"version\": \"1.0\", \"capabilities\": [ { \"action_id\": \"vcx.batch_transcode\", \"schema_id\": \"aurea.vcx.batch_transcode\", \"schema_v\": 1, \"summary\": \"Transcodifica lista de m\u00eddias p/ alvo padronizado.\", \"examples\": [\"Padroniza 1080p AV1 para pasta X e notifica time A.\"], \"topics\": { \"commit\": \"vcx:graph\", \"propose\": \"vcx:propose\" } } ] } 3) Conven\u00e7\u00f5es de Schema (JSON Schema, can\u00f4nico) Campos padr\u00e3o : @type , @ver , schema_id , schema_v . Enums/tags : #[serde(tag=\"op\", rename_all=\"snake_case\")] para variantes. Exemplos e hints : incluir x-ui e x-llm (metadados amig\u00e1veis ao LLM). Canoniza\u00e7\u00e3o : JSON can\u00f4nico para hashing (ordem est\u00e1vel, sem floats n\u00e3o determin\u00edsticos). Exemplo (resumo) \u2014 aurea.vcx.batch_transcode@1 : { \"$id\": \"aurea.vcx.batch_transcode#1\", \"type\": \"object\", \"required\": [\"inputs\", \"video\", \"notify\"], \"properties\": { \"inputs\": { \"type\": \"array\", \"items\": { \"type\": \"string\", \"format\": \"uri\" }, \"minItems\": 1, \"description\": \"URIs ou IDs internos de m\u00eddias de entrada\" }, \"video\": { \"type\": \"object\", \"required\": [\"width\",\"height\",\"codec\"], \"properties\": { \"width\": {\"type\":\"integer\",\"minimum\":16}, \"height\":{\"type\":\"integer\",\"minimum\":16}, \"codec\": {\"enum\": [\"av1\"]}, \"preset\": {\"type\":\"integer\",\"minimum\":0,\"maximum\":10}, \"crf\": {\"type\":\"integer\",\"minimum\":0,\"maximum\":63}, \"fps\": {\"type\":\"number\",\"minimum\":1} }, \"x-llm\": { \"defaults\": {\"codec\":\"av1\",\"preset\":6,\"crf\":28,\"fps\":30} } }, \"notify\": { \"type\": \"object\", \"required\": [\"channel\"], \"properties\": { \"channel\":{\"type\":\"string\"}, \"message\":{\"type\":\"string\"} } }, \"deadline_utc\": {\"type\":\"string\",\"format\":\"date-time\"} } } 4) Operador Conversacional (OC) \u2014 Contratos 4.1 Inten\u00e7\u00e3o & Slots { \"@type\":\"aurea/intent.v1\", \"action_id\":\"vcx.batch_transcode\", \"slots\": { \"...\": \"valores j\u00e1 validados contra o schema do action_id\" }, \"constraints\": { \"window\":\"business_hours\", \"local_only\":true }, \"deadline_utc\":\"2026-02-20T17:00:00Z\" } 4.2 Plano/Preview (ephemero) { \"@type\":\"aurea/plan_preview.v1\", \"plan_hash\":\"b3_..._abcd\", \"dag\": { \"nodes\":[...], \"edges\":[...] }, // can\u00f4nico \"quotas\": { \"tokens\": 0, \"time_ms\": 540000 }, \"policy_trace\": [ {\"rule\":\"pii_local\",\"ok\":true}, {\"rule\":\"window\",\"ok\":true} ], \"estimated_ttft_ms\": 800, \"estimated_ttr_ms\": 300000, \"artifacts_preview\":[{\"kind\":\"pack\",\"label\":\"vcx-output\",\"est_size\":\"~4.2GB\"}], \"confirm_required\": \"DUAL_CONTROL\" // ou null } 4.3 Confirma\u00e7\u00e3o \u2192 Commit { \"@type\":\"aurea/commit_request.v1\", \"plan_hash\":\"b3_..._abcd\", \"confirm_phrase\":\"DUAL_CONTROL\", \"idem_key\":\"b3_..._abcd\", // = plan_hash \"tenant\":\"acme\" } 5) T\u00f3picos e Estados (FSM) T\u00f3picos Proposi\u00e7\u00e3o: *:propose (sem assinatura; guarda preview opcional com TTL curto). Execu\u00e7\u00e3o: *:commit \u2192 enfileira em vcx:graph , science:run , hdl:sim , etc. Estados (stream \u00fanico) accepted \u2192 assigned \u2192 progress{stage,time_ms,meta?} \u2192 result{...} | fail{error_code, details} C\u00f3digos de erro (curtos, operacionais) SCHEMA_INVALID , SLOT_MISSING , POLICY_BLOCKED , LEASE_EXPIRED , WORKER_UNAVAILABLE , ARTIFACT_VERIFY_FAIL , TIME_BUDGET_EXCEEDED 6) APIs (HTTP/3 + SSE) GET /v1/capabilities \u2192 registry GET /v1/schema/{schema_id}/{v} \u2192 JSON Schema POST /v1/oc/parse_intent \u2192 Intent (OC interpreta NL\u2192slots v\u00e1lidos) POST /v1/oc/plan_preview \u2192 PlanPreview (aplica policies/quotas) POST /v1/oc/commit \u2192 {status, receipt_cid} GET /v1/stream?tenant=&topic=&id= \u2192 SSE estados GET /v1/receipts/{cid} \u2192 Receipt assinado POST /v1/verify/pack \u2192 {\"ok\":true,\"issues\":[]} GET /v1/metrics (Prometheus) | POST /v1/export?format=parquet|arrow 7) Tool Spec p/ LLMs (fun\u00e7\u00f5es cham\u00e1veis) 7.1 list_capabilities input : {} output : {\"capabilities\":[{action_id,schema_id,schema_v,summary}]} 7.2 get_schema input : {\"schema_id\":\"aurea.vcx.batch_transcode\",\"schema_v\":1} output : JSON Schema 7.3 propose_plan input : ActionDraft (inten\u00e7\u00e3o+slots) output : PlanPreview ou erro SCHEMA_INVALID com repair_hints[] 7.4 commit_plan input : CommitRequest output : {status:\"accepted\", \"receipt_cid\":\"rcpt-...\"} 7.5 replay_from_receipt input : {\"receipt_cid\":\"rcpt-...\",\"override?\":{}} output : {status, new_receipt_cid} Esses \u201ctools\u201d s\u00e3o est\u00e1veis para function-calling/Actions de qualquer provedor. 8) Auto-reparo e limites Loop de reparo : at\u00e9 2 tentativas: Validar slots contra schema \u2192 se falhar, gerar repair_patch minimal (ex.: preencher preset , crf , normalizar fps inteiro). Se ainda inv\u00e1lido, pedir apenas os campos faltantes numa \u201cmensagem curta de solicita\u00e7\u00e3o\u201d (texto curto + lista de campos). Campos perigosos : bloqueados por policy ( local_only , dual_control , max_duration_ms , allowed_codecs ). 9) Pol\u00edticas (LLM-aware) OC chama policy.evaluate(Intent|Plan) antes de enfileirar. Exemplo de regras: pii_local : se inputs apontam para espa\u00e7o PII, route=LocalOnly e capabilities=[\"local_gpu\",\"no_network\"] . window : deadline_utc fora da janela \u2192 agenda (OC sugere schedule_at ). commitment : a\u00e7\u00f5es com efeitos externos exigem confirm_phrase:\"DUAL_CONTROL\" . policy_trace sempre vem no PlanPreview e no Receipt . 10) Recibos e Assinaturas Receipt inclui: work_hash , result_hash , policy_trace[] , ttft_ms , ttr_ms , signatures[] , artifacts[] (pack_cid, entries[]) , schema_id/v . Assinatura : ed25519 ( alg:\"Ed25519\" , key_id:\"kid-2026-02-01\" , sig:base64 ). \u00c2ncoras Merkle : raiz di\u00e1ria armazenada e exposta em /v1/anchors/YYYY-MM-DD . 11) Observabilidade (SRE) M\u00e9tricas: aurea_ttft_ms{topic} aurea_ttr_ms{topic} aurea_queue_depth{topic} aurea_reassigns_total{topic} aurea_error_rate{topic,error_code} Export: /v1/export?format=parquet&since=... com receipts , stages , artifacts . 12) UX (chat \u2192 cart\u00e3o \u2192 confirmar) Card do Plano renderizado de PlanPreview : Resumo em 3 linhas, lista de etapas, custos/SLOs , policy_trace . Bot\u00f5es: Confirmar , Editar campos (renderizados via schema), Agendar . Confirmou? Stream mostra accepted/assigned/progress/result + link \ud83d\udcdc Recibo e Baixar VCX-PACK . 13) Exemplos r\u00e1pidos 13.1 Requisi\u00e7\u00e3o natural \u2192 OC Usu\u00e1rio: \u201cConverte 20 v\u00eddeos da pasta /lab/raw para 1080p AV1 e avisa o time A. Entrega at\u00e9 amanh\u00e3.\u201d Fluxo interno: list_capabilities \u2192 encontra vcx.batch_transcode . get_schema \u2192 aplica defaults ( preset=6, crf=28, fps=30 ). propose_plan \u2192 PlanPreview{plan_hash=..., policy_trace=[window:ok, pii_local:false]} . UI mostra card \u2192 usu\u00e1rio clica Confirmar . commit_plan{plan_hash, confirm_phrase?} \u2192 {status:\"accepted\",receipt_cid:\"rcpt-...\"} . Stream + Recibo assinado. 13.2 Falta um slot Se fps omitido \u2192 OC tenta 30 . Se schema exigir inteiro e veio 29.97 , auto-repara para 30 . Ainda falhou? Pede s\u00f3 fps . 14) Roadmap LLM-friendly (incremental) Fase A : publicar capabilities+schemas+examples; implementar propose_plan/commit_plan ; UI Card. Fase B : reparo autom\u00e1tico + dif de planos (explicativo) + idempot\u00eancia por plano. Fase C : pol\u00edticas duras (DUAL_CONTROL/local-only/janelas) + anchors. Fase D : agents externos (CLI/mobile) usando o mesmo tool spec. Entreg\u00e1veis desta especifica\u00e7\u00e3o Endpoints e modelos JSON acima implementados no aurea serve . Registry de capacidades com schemas versionados e exemplos. OC dentro de plugins/op_llm_json com fases: Intent \u2192 Plan \u2192 Commit . UI Leptos com PlanCard e formul\u00e1rios auto-gerados pelo schema. Valida\u00e7\u00e3o, auto-reparo (N=2), idempot\u00eancia por plan_hash , assinatura de recibos e m\u00e9tricas SRE. Com isso, a \u201cconversa\u201d vira a interface \u2014 e a complexidade fica dentro, contratualizada e audit\u00e1vel, sem atrito para quem usa. Quer que eu j\u00e1 atualize o esqueleto para incluir capabilities , oc/* (endpoints), PlanCard e um exemplo completo de vcx.batch_transcode ? Prompt: o plano completo s\u00e3o as 2 mensagens \u00faltimas n\u00e9? Response: Sim. O plano completo est\u00e1 nas duas \u00faltimas mensagens : Padr\u00e3o do Operador Conversacional (OC) \u2014 como o LLM conduz inten\u00e7\u00e3o \u2192 plano \u2192 confirma\u00e7\u00e3o \u2192 execu\u00e7\u00e3o, com dry-run, idempot\u00eancia por plano e pol\u00edticas aplicadas antes da fila. Especifica\u00e7\u00e3o V1 LLM-friendly \u2014 formaliza\u00e7\u00e3o dos contratos e APIs: Registry de capacidades + JSON Schemas e metadados x-llm . Objetos Intent , PlanPreview , CommitRequest e FSM de estados. Endpoints ( /v1/oc/* , schemas, receipts, metrics, export). Tool spec para function-calling (list/get/propose/commit/replay). Policies, assinaturas, \u00e2ncoras Merkle, m\u00e9tricas SRE e UI PlanCard. Roadmap de implementa\u00e7\u00e3o. Se quiser, junto tudo em um \u00fanico doc Markdown (ou PDF) com \u00edndice e links entre se\u00e7\u00f5es. Prompt: Fazer pesquisa ampla na internet sobre softwares que tentam a reprodutibilidade de experimentos cient\u00edficos - o que fazem, como fazem e as dores Response: Thought for 24s Perfeito, Dan! Fiz uma varredura ampla e organizei o panorama em 6 \u201cfam\u00edlias\u201d de solu\u00e7\u00f5es para reprodutibilidade computacional \u2014 com exemplos, como fazem e as dores t\u00edpicas que relatam. No fim, deixo um mapa das principais lacunas onde o \u00c1UREA pode brilhar. 1) Empacotamento/c\u00e1psulas execut\u00e1veis O que fazem: empacotam c\u00f3digo+ambiente+dados e (\u00e0s vezes) resultados numa \u201cc\u00e1psula\u201d que pode ser reexecutada noutro lugar. Como fazem: tra\u00e7am depend\u00eancias e congelam ambiente (sistemas, libs, vari\u00e1veis) e inputs, depois geram um pacote com manifesto/proveni\u00eancia; alguns d\u00e3o DOI e hist\u00f3rico. Exemplos: ReproZip/ReproServer : captura execu\u00e7\u00f5es e gera um bundle .rpz ; reexecuta em diversos \u201cunpackers\u201d (sem lock-in). reprozip.org+2docs.libnova.com+2 Code Ocean : \u201ccompute capsules\u201d imut\u00e1veis com lineage graph, versionamento, DOI/publish. codeocean.com+2library.hkust.edu.hk+2 Whole Tale : \u201ctales\u201d como objetos de pesquisa execut\u00e1veis (dados+ambiente+c\u00f3digo+metadados). wholetale.org+2labs.globus.org+2 RO-Crate / Workflow RO-Crate : padr\u00e3o para empacotar objetos (dados, software, workflows) com metadados FAIR e perfis para runs (proveni\u00eancia de execu\u00e7\u00f5es). researchobject.org+3researchobject.org+3RDA+3 Dores comuns: drift do ambiente com o tempo, formatos/ontologias diferentes de proveni\u00eancia, dados sens\u00edveis e acesso a reposit\u00f3rios externos. ScienceDirect+1 2) Orquestradores/workflow engines O que fazem: definem pipelines determin\u00edsticos, paralelizam, escalam em HPC/cloud e integram containers para portabilidade. Como fazem: linguagens declarativas (Snakefile, Nextflow DSL, CWL), execu\u00e7\u00e3o com Docker/Apptainer, caching, al\u00e9m de cat\u00e1logos comunit\u00e1rios (nf-core, WorkflowHub). Exemplos: Snakemake : workflows declarados em Python; descrevem softwares e implantam automaticamente; documenta\u00e7\u00e3o foca em portabilidade e reprodutibilidade. snakemake.readthedocs.io+1 Nextflow : executa com Docker/Apptainer/Podman; mesma pipeline roda em qualquer Unix; integra\u00e7\u00e3o com Git e nf-core. nextflow.io+1 Galaxy : plataforma web multi-usu\u00e1rio com workflows reprodut\u00edveis e biblioteca p\u00fablica; integra reposit\u00f3rios de dados (ex.: Dataverse) e fornece DOIs para workflows curados. OUP Academic+2iwc.galaxyproject.org+2 WorkflowHub (registro): publica/descobre workflows com RO-Crate , CWL, TRS; promove workflows como objetos FAIR. workflowhub.eu+2Nature+2 Dores comuns: falhas de reexecu\u00e7\u00e3o autom\u00e1tica por depend\u00eancias externas, falta de padr\u00f5es interoper\u00e1veis de proveni\u00eancia (da\u00ed o avan\u00e7o do Workflow Run RO-Crate ). mir.cs.illinois.edu+1 3) Notebooks reproduz\u00edveis (ensino/demos) O que fazem: tornam reposit\u00f3rios execut\u00e1veis em um clique para ensino, revis\u00e3o e demo. Como fazem: Binder/BinderHub constr\u00f3i imagens a partir de environment.yml / requirements.txt / Dockerfile e sobe um Jupyter ef\u00eamero. jupyter.org+2mybinder.org+2 Dores: limites de recursos/tempo, falta de GPU persistente, e depend\u00eancia de arquivos de configura\u00e7\u00e3o bem mantidos. earth-env-data-science.github.io 4) Gest\u00e3o de dados, vers\u00f5es e proveni\u00eancia O que fazem: versionam datasets e modelos, ligam execu\u00e7\u00f5es a artefatos, e preservam o lineage (quem gerou o qu\u00ea, quando e como). Como fazem: sobre Git/git-annex e/ou armazenamento de objetos; logs de execu\u00e7\u00f5es; refer\u00eancias imut\u00e1veis. Exemplos: DataLad : versionamento de dados/cole\u00e7\u00f5es, integra\u00e7\u00e3o com RDM; casos de \u201cpaper reprodut\u00edvel\u201d. datalad.org+1 DVC : extens\u00e3o Git para dados/modelos/experimentos; pipelines reproduz\u00edveis para ML. DVC+1 MLflow : rastreia par\u00e2metros, m\u00e9tricas e artefatos ; registry de modelos para reexecutar/validar. MLflow+1 Pachyderm : pipelines dirigidos a dados com data versioning e lineage autom\u00e1ticos em Kubernetes. GitHub+1 Dores: custo/complexidade de hospedar infra, GC de dados grandes, pol\u00edticas de acesso/PII; necessidade de \u201cglue\u201d para ligar dados\u2194workflow\u2194recibos verific\u00e1veis. Atlan+1 5) Portais de compartilhamento/DOI e open science O que fazem: providenciam dep\u00f3sito/DOI para dados, c\u00f3digo, c\u00e1psulas e materiais; melhoram cita\u00e7\u00e3o e descoberta. Exemplos: OSF (gest\u00e3o do ciclo de pesquisa, preregistro, integra GitHub/Drive); Figshare (reposit\u00f3rio com DOI). cos.io+2Current Protocols+2 Dores: pol\u00edticas desiguais entre peri\u00f3dicos, pouca padroniza\u00e7\u00e3o de \u201co que conta\u201d como material reproduz\u00edvel. Frontiers 6) Padr\u00f5es de metadados e pr\u00e1ticas O que fazem: definem boas pr\u00e1ticas e padr\u00f5es para tornar pacotes/workflows FAIR e reproduz\u00edveis (PROV, RO-Crate, \u201cTen Simple Rules\u201d). Refer\u00eancias \u00fateis: guias e revis\u00f5es listando barreiras (ambiente, dados restritos, cultura e treino) e recomenda\u00e7\u00f5es. PLOS+2PLOS+2 Padr\u00f5es de \u201ccomo\u201d (recorrentes nos projetos) Containeriza\u00e7\u00e3o + pin de vers\u00f5es (Docker/Apptainer) p/ isolar depend\u00eancias. nextflow.io+1 Proveni\u00eancia de execu\u00e7\u00e3o (graph/lineage, RO-Crate para runs). codeocean.com+1 Empacotes cit\u00e1veis com manifesto + DOI (capsule/tale/RO-Crate). wholetale.org+1 Registries de workflows (descoberta, vers\u00f5es, testes cont\u00ednuos). iwc.galaxyproject.org Versionamento de dados/modelos e amarra\u00e7\u00e3o aos jobs. datalad.org+1 Dores estruturais (s\u00edntese) Drift e envelhecimento : ambientes e imagens se tornam irreprodut\u00edveis com o tempo; necessidade de \u201creceipts\u201d verific\u00e1veis e \u00e2ncoras. mir.cs.illinois.edu Dados e acesso : PII, dados propriet\u00e1rios e reposit\u00f3rios privados quebram demos p\u00fablicas; solu\u00e7\u00f5es integram uploads diretos e trilhas audit\u00e1veis. galaxyproject.org Interoperabilidade de proveni\u00eancia : m\u00faltiplos formatos; RO-Crate Run surge para padronizar \u201cexecu\u00e7\u00e3o\u201d. PLOS Custo/infra : operar clusters/containers/registries e armazenar vers\u00f5es \u00e9 caro; GC e pol\u00edticas de reten\u00e7\u00e3o s\u00e3o essenciais. Atlan Cultura e pol\u00edtica editorial : varia\u00e7\u00e3o grande nas exig\u00eancias de reprodutibilidade e pouco reconhecimento formal para software/dados. Frontiers GPU/aleatoriedade : determinismo em ML/AV1/HDL exige seeds, fixar clocks/TZ, desabilitar rede quando necess\u00e1rio (pr\u00e1ticas, n\u00e3o s\u00f3 ferramentas). PLOS Onde o \u00c1UREA se encaixa (oportunidades) Recibos fortes : muitos projetos t\u00eam metadata/lineage, poucos entregam receipts assinados com hashes de entrada/sa\u00edda e pol\u00edtica aplicada \u2014 lacuna que o \u00c1UREA cobre nativamente. PLOS Idempot\u00eancia por plano + DUAL_CONTROL/local-only antes da fila: raramente \u00e9 1\u00aa classe fora de dom\u00ednios regulados. Frontiers Pacote universal de artefatos (VCX-PACK) + RO-Crate : interoperar com RO-Crate/WorkflowHub mantendo benef\u00edcios de empacote bin\u00e1rio eficiente. researchobject.org UI conversacional com dry-run : grande parte das plataformas exige formulari\u00f5es; o padr\u00e3o OC do \u00c1UREA reduz atrito sem perder contrato. (Contexto comparado a Code Ocean \u201cpreview\u201d e Galaxy \u201chistory/workflow tests\u201d.) codeocean.com+1 Lista curta de ferramentas (por uso) C\u00e1psulas/empacote: ReproZip; Code Ocean; Whole Tale; RO-Crate/Workflow RO-Crate. ScienceInsights+3reprozip.org+3codeocean.com+3 Workflows: Snakemake; Nextflow; Galaxy; CWL (via WorkflowHub). workflowhub.eu+3snakemake.readthedocs.io+3nextflow.io+3 Dados/linhagem: DataLad; DVC; MLflow; Pachyderm. GitHub+3datalad.org+3DVC+3 Notebooks: Binder/BinderHub. jupyter.org Open science/DOI: OSF; Figshare. cos.io+1 Se quiser, converto isso num doc comparativo (tabelado) com crit\u00e9rios (empacote, workflows, proveni\u00eancia, DOI, containers, GPU, PII, pol\u00edticas), marcando onde cada um \u00e9 forte/fraco e adiciono recomenda\u00e7\u00f5es de interoperabilidade direta com o \u00c1UREA (ex.: export de Workflow Run RO-Crate junto do Receipt ). Prompt: O que \u00e9 importante incorporar Response: Perfeito \u2014 aqui vai o que vale incorporar j\u00e1 no \u00c1UREA para ficar s\u00f3lido, interoper\u00e1vel e com UX leve, sem perder for\u00e7a t\u00e9cnica. 1) Padr\u00f5es e interoperabilidade (sem lock-in) Export/Import RO-Crate (incl. Workflow Run RO-Crate) junto do Receipt : mant\u00e9m FAIR/descoberta e facilita publica\u00e7\u00e3o/DOI. Mapeamento VCX-PACK \u2194 RO-Crate : manifesto \u2192 ro-crate-metadata.json , entries[] \u2192 hasPart[] ; incluir provenance/activity . JSON Schema + \u201ctool spec\u201d por a\u00e7\u00e3o: schema_id/v , exemplos, x-llm (defaults/hints), x-ui (widget/sem\u00e2ntica). CWL/Snakemake/Nextflow adapters (leitura) : importar um pipeline e convert\u00ea-lo para DAG tipado do \u00c1UREA (mesmo que com perda m\u00ednima). 2) Determinismo e proveni\u00eancia \u201cby default\u201d Canonical JSON para hashing (NRF/CID) e idempot\u00eancia por plano (hash do DAG). Seeds/TZ/clock fixos e \u201cno network\u201d opcional por policy; registrar hardware/runtime fingerprint (CPU/GPU, driver, libc). Merkle di\u00e1rio para recibos (root publicado); todas execu\u00e7\u00f5es com assinatura ed25519 e kid rotativo. KATs cont\u00ednuos : toda a\u00e7\u00e3o cr\u00edtica tem exp_ingest /comparador oficial (bit-a-bit para ci\u00eancia/HDL; toler\u00e2ncias documentadas para m\u00eddia/ML). 3) Pol\u00edtica e seguran\u00e7a antes da fila Avalia\u00e7\u00e3o de policy no :propose (n\u00e3o no :commit ): local-only/PII , janelas, cotas e DUAL_CONTROL j\u00e1 aparecem no PlanCard . DUAL_CONTROL com frase de compromisso e carimbo no recibo; rastreabilidade do aprovador no policy_trace . Rotas autom\u00e1ticas : se PII ou segredo \u2192 for\u00e7a worker local ; se janela restrita \u2192 agenda em vez de falhar. 4) Dados e artefatos como 1\u00aa classe Integra\u00e7\u00e3o opcional com DVC/DataLad : gravar no Receipt a refer\u00eancia imut\u00e1vel do dataset/modelo (hash/URL). verify() nativo do VCX-PACK + valida\u00e7\u00e3o de offsets/hashes; policy de reten\u00e7\u00e3o e GC para packs grandes. Cat\u00e1logo de artefatos consult\u00e1vel (por pack_cid , schema_id , tags), com linhagem (quem/qual recibo gerou). 5) Execu\u00e7\u00e3o e orquestra\u00e7\u00e3o simplificadas Um bin\u00e1rio ( aurea ) : API+UI+fila/leases+assinaturas+metrics; workers in-proc por padr\u00e3o, QUIC/out-of-proc quando isolar. Leases no redb com reassign autom\u00e1tico; idempot\u00eancia (tenant, topic, idem_key) preenchida por hash do plano se ausente. Estados padronizados num stream: accepted \u2192 assigned \u2192 progress{stage} \u2192 result|fail{code} com tempos por etapa . 6) Operador Conversacional (LLM) com contratos Duas etapas : :propose \u2192 PlanCard (DAG, SLOs, custos, policy_trace) \u2192 Confirmar \u2192 :commit . Auto-reparo N=2 para slots; se falhar, pedir s\u00f3 os campos faltantes (lista curta). Idempot\u00eancia por plano : idem_key = blake3(dag_canon) ; repetir \u201cOK\u201d n\u00e3o duplica. 7) Observabilidade e SLOs operacionais M\u00e9tricas SRE : ttft_ms , ttr_ms , queue_depth , reassigns , error_rate{code} , stage_time_ms{stage} . Exports Arrow/Parquet e consultas DataFusion; amostras de recibos para auditoria. Or\u00e7amentos em tempo real : mostrar no PlanCard e emitir alerta quando excedidos. 8) Publica\u00e7\u00e3o e citabilidade DOI opcional para packs/execu\u00e7\u00f5es (integra\u00e7\u00e3o OSF/Figshare/Zenodo) via bot\u00e3o \u201cPublicar\u201d no recibo. Manifesto de cita\u00e7\u00e3o (CITATION.cff/RO-Crate) gerado automaticamente com autores, vers\u00e3o e receipt_cid . 9) Testes, CI e hardening Testes de determinismo por dom\u00ednio (ci\u00eancia/HDL bit-a-bit; m\u00eddia com thresholds fixos). Chaos/staging com lat\u00eancia/falha/kill para validar reassign e SLOs. Compatibilidade GPU : lista de vers\u00f5es/flags que garantem determinismo (ex.: desativar kernels n\u00e3o determin\u00edsticos quando exigido). Prioridade pr\u00e1tica (o que entrar agora) P0 \u2014 Base \u201cimposs\u00edvel de quebrar\u201d Assinatura de recibos + Merkle di\u00e1rio Canonical JSON + idempot\u00eancia por plano Policy no :propose + DUAL_CONTROL Verifica\u00e7\u00e3o VCX-PACK ( verify() ) PlanCard com SLOs/custos/policy_trace P1 \u2014 Interop e dados Export RO-Crate (incl. Run) junto do Receipt Refer\u00eancias DVC/DataLad no recibo Adapters de leitura de CWL/Snakemake \u2192 DAG \u00c1UREA P2 \u2014 Opera\u00e7\u00e3o e SRE M\u00e9tricas SRE completas + exports Parquet Chaos/staging + testes de determinismo automatizados Onde encaixa no monorepo core/ : canonical JSON, tipos Intent/PlanPreview/CommitRequest . receipts/ (ou dentro do bin\u00e1rio): assinatura, Merkle, verify() de assinatura. artifacts/vcx_pack/ : verify() , mapeamento para RO-Crate. runtime/ : leases, tempos por etapa, roteamento por topic . plugins/op_llm_json/ : :propose \u2192 PlanCard \u2192 :commit com auto-reparo. ui_web/ : PlanCard + \u201c\ud83d\udcdc Recibo\u201d com download/verify/export/DOI. bus/ (ou aurea ): endpoints /v1/capabilities , /v1/oc/* , /v1/export , /v1/anchors/* . Aceite m\u00ednimo para cada item Recibo assinado : signatures[].alg=Ed25519 , kid v\u00e1lido, verify_receipt() retorna OK. Merkle : anchors/YYYY-MM-DD.json com root e lista de receipt_cid . PlanCard : mostra policy_trace , SLOs (TTFT/TTR), custos e Confirmar/Agendar/Editar . RO-Crate : arquivo ro-crate-metadata.json alinhado ao pack; run presente quando houver execu\u00e7\u00e3o. Determinismo : replays do mesmo recibo geram hash(es) id\u00eanticos (ou dentro do tolerance configurado/registrado). Se topar, j\u00e1 abro os \u00e9picos: P0-Assinaturas+Merkle , P0-Canonical+Idempot\u00eancia , P0-Policy-Propose+DUAL_CONTROL , P0-PlanCard , P0-VCX-PACK Verify \u2014 e deixo os contratos/rotas prontos para o OC e para o export RO-Crate.","title":"Projeto Final"},{"location":"ProjetoFinal/#aurea-projeto-final","text":"Plataforma 100% Rust para Ci\u00eancia Reprodut\u00edvel, VCX, Prot\u00f3tipos de Sil\u00edcio e Opera\u00e7\u00e3o Cr\u00edtica","title":"\u00c1UREA \u2014 Projeto Final"},{"location":"ProjetoFinal/#0-sumario-executivo","text":"\u00c1UREA \u00e9 uma plataforma unificada, tipada e verific\u00e1vel para execu\u00e7\u00e3o de trabalhos cr\u00edticos com determinismo , recibos fortes e artefatos port\u00e1veis . Implementada integralmente em Rust, combina um bus de jobs com pol\u00edticas audit\u00e1veis , plugins nativos/WASI , empacotamento universal VCX-PACK e UI PWA . O desenho minimiza componentes e round-trips: um bin\u00e1rio principal serve API+UI, gerencia fila/leases, assina recibos e exp\u00f5e m\u00e9tricas; workers rodam in-proc por padr\u00e3o e out-of-proc /QUIC quando necess\u00e1rio.","title":"0) Sum\u00e1rio executivo"},{"location":"ProjetoFinal/#1-objetivos-e-resultados","text":"Determinismo e reprodutibilidade : replay bit-a-bit via seeds, clocks fixos, canonical JSON e KATs. Auditabilidade forte : recibos com NRF/CID, policy_trace , tempos por etapa e assinaturas ed25519. Tipagem ponta-a-ponta : contratos Rust \u2192 JSON Schema \u2192 valida\u00e7\u00e3o de payloads/results \u2192 UI auto-gerada. Opera\u00e7\u00e3o cr\u00edtica : quotas r\u00edgidas, PII/local-only, janelas, DUAL_CONTROL, \u00e2ncoras Merkle. Portabilidade de artefatos : VCX-PACK com manifesto/\u00edndices/hashes/verify. TCO baixo : tudo Rust, sem SaaS de cola; um bin\u00e1rio opera API, fila e observabilidade.","title":"1) Objetivos e resultados"},{"location":"ProjetoFinal/#2-escopo","text":"Dom\u00ednios de primeira classe: Ci\u00eancia reprodut\u00edvel (WASI/bin, KATs). VCX (imagem/\u00e1udio/v\u00eddeo, AV1, tempos por etapa). HDL (gera\u00e7\u00e3o Rust\u2192HDL, simula\u00e7\u00e3o determin\u00edstica, VCD). Operadores sem\u00e2nticos (Text\u2192JSON schema-driven; RAG tipado).","title":"2) Escopo"},{"location":"ProjetoFinal/#3-arquitetura-enxuta","text":"","title":"3) Arquitetura (enxuta)"},{"location":"ProjetoFinal/#31-componentes","text":"aurea-bin (\u00fanico bin\u00e1rio) API/Bus : HTTP/3 (QUIC) + HTTP/1.1 fallback; SSE para stream. UI PWA (Axum + Leptos): forms e viewers gerados por schema. Fila/Leases : redb ACID; reassign autom\u00e1tico. Policies : fun\u00e7\u00f5es puras compiladas; policy_trace no recibo. Assinaturas : ed25519 (chaves geridas pelo servi\u00e7o; kid rotativo). Observabilidade : Prometheus + exports Arrow/Parquet; \u00e2ncoras Merkle di\u00e1rias. Plugins (in-proc por padr\u00e3o; WASI/out-of-proc via QUIC quando requerido): exp_runner , exp_ingest , vcx_worker , hdl_codegen , hdl_sim , op_llm_json , op_rag , notify .","title":"3.1 Componentes"},{"location":"ProjetoFinal/#32-fluxo-de-alto-nivel","text":"Cliente envia WorkUnit<T> \u2192 API valida schema/idempot\u00eancia \u2192 accepted . Scheduler aplica policies \u2192 enfileira \u2192 adquire lease \u2192 despacha handler (plugin). Handler emite progress (tempos por etapa), produz artefatos (VCX-PACK), retorna result . Servi\u00e7o gera Receipt (hashes, trace, tempos), assina e ancora (Merkle opcional). Cliente acompanha por stream e consulta recibos via /v1/receipts/{cid} .","title":"3.2 Fluxo de alto n\u00edvel"},{"location":"ProjetoFinal/#4-contratos-de-dados","text":"","title":"4) Contratos de dados"},{"location":"ProjetoFinal/#41-tipos-principais-rust-json-schema","text":"WorkUnit<T> ; WorkResult<R> ; Receipt ; Metrics ; Signature ; PolicyEntry ; ArtifactRef . NRF/CID : cid = blake3(canonical_json(value)) . Idempot\u00eancia : (tenant, topic, idem_key) ; se ausente, idem_key = blake3(payload_canon) .","title":"4.1 Tipos principais (Rust \u2192 JSON Schema)"},{"location":"ProjetoFinal/#42-versionamento-e-interoperabilidade","text":"@type , @id (uuid) , @ver , @world . schema_id / schema_v gravados no recibo; semver estrito ; Schemas publicados pelo servi\u00e7o.","title":"4.2 Versionamento e interoperabilidade"},{"location":"ProjetoFinal/#5-api-e-protocolo","text":"","title":"5) API e protocolo"},{"location":"ProjetoFinal/#51-http3-quic-e-sse","text":"POST /v1/work \u2192 enfileira WorkUnit<T> ; responde {status, receipt_cid} . GET /v1/stream?topic=...&tenant=...&id=... (SSE) \u2192 eventos accepted|assigned|progress|done|error . GET /v1/receipts/{cid} \u2192 Receipt . GET /v1/schema/{schema_id}/{v} \u2192 JSON Schema. POST /v1/verify/pack \u2192 valida VCX-PACK (hashes/manifest/entries). GET /v1/metrics (Prometheus). POST /v1/export?format=parquet|arrow \u2192 dump incremental.","title":"5.1 HTTP/3 (QUIC) e SSE"},{"location":"ProjetoFinal/#52-quic-workersout-of-proc","text":"Frames (bidi stream): worker.hello{worker_id, capacity, capabilities[]} job.assign{work_unit} / job.progress{stage, t_ms} / job.result{result} / job.fail{err} job.heartbeat{lease_id} Leases: Tabelas ready(topic) , leased(topic) com lease_ttl_ms . Reassign em expira\u00e7\u00e3o.","title":"5.2 QUIC (workers/out-of-proc)"},{"location":"ProjetoFinal/#6-policies-compile-time-auditaveis","text":"Trait: pub trait Policy { fn evaluate(&self, work: &WorkUnit<serde_json::Value>) -> Decision; } pub struct Decision { pub route: Route, pub budgets: Quotas, pub trace: Vec<PolicyEntry> } Exemplos: quotas_chat : topic.starts_with(\"chat:\") \u2192 tokens<=4000 . pii_local : pii_detected(payload) \u2192 route(LocalOnly) . commitment : topic.ends_with(\":commit\") \u2192 require(DUAL_CONTROL) . policy_trace sempre gravado em Receipt .","title":"6) Policies (compile-time, audit\u00e1veis)"},{"location":"ProjetoFinal/#7-vcx-pack-artefatos","text":"Formato : manifesto + \u00edndice + trailer; entradas com path , sha , size . CID do pack : blake3(manifest_json) . Lifecycle integrado : runtime exp\u00f5e pack_begin/pack_add/pack_close e preenche receipt.artifacts[] . Verify : endpoint/CLI valida offsets, hashes e consist\u00eancia.","title":"7) VCX-PACK (artefatos)"},{"location":"ProjetoFinal/#8-determinismo-e-reprodutibilidade","text":"Seeds fixos, TZ=UTC, rel\u00f3gios simulados quando necess\u00e1rio. Canonical JSON p/ hashing e idempot\u00eancia. KATs : ingest/compare outputs com packs de refer\u00eancia. Isolamento de rede (policies) e vers\u00f5es travadas de libs.","title":"8) Determinismo e reprodutibilidade"},{"location":"ProjetoFinal/#9-observabilidade-e-forense","text":"M\u00e9tricas: ttft_ms , ttr_ms , queue_depth , reassigns , error_rate , stage_time_ms{stage} . Exports Parquet/Arrow + DataFusion para an\u00e1lises. \u00c2ncoras Merkle di\u00e1rias dos recibos (root publicado em log/arquivo).","title":"9) Observabilidade e forense"},{"location":"ProjetoFinal/#10-ui-pwa-axum-leptos","text":"Auto-forms a partir de JSON Schema dos contratos. Lista/Detalhe de Jobs e \ud83d\udcdc Recibo com policy_trace , hashes, tempos, artefatos (download/verify). Replay : bot\u00e3o que reenvia WorkUnit original (ou simula via VCX-PACK/seed).","title":"10) UI PWA (Axum + Leptos)"},{"location":"ProjetoFinal/#11-seguranca-e-conformidade","text":"Assinaturas ed25519 on-by-default; rota\u00e7\u00e3o de chaves ( kid ). Pol\u00edticas para PII/local-only e DUAL_CONTROL em t\u00f3picos sens\u00edveis. Logs rotacionados; controle de reten\u00e7\u00e3o; snapshots peri\u00f3dicos.","title":"11) Seguran\u00e7a e conformidade"},{"location":"ProjetoFinal/#12-roadmap-90-dias","text":"","title":"12) Roadmap (90 dias)"},{"location":"ProjetoFinal/#m1-fundacao-1-binario-d0d15","text":"aurea serve (HTTP/3+SSE), redb, fila/leases, idempot\u00eancia por hash, schemas publicados, UI base.","title":"M1 \u2014 Funda\u00e7\u00e3o 1-bin\u00e1rio (D0\u2013D15)"},{"location":"ProjetoFinal/#m2-recibos-fortes-vcx-d16d35","text":"Assinatura ed25519; tempos por etapa; VCX-PACK integrado + verify; UI \u201c\ud83d\udcdc Recibo\u201d.","title":"M2 \u2014 Recibos fortes + VCX (D16\u2013D35)"},{"location":"ProjetoFinal/#m3-dominios-d36d65","text":"exp_runner / exp_ingest (WASI/bin) + KATs; vcx_worker (resize\u2192AV1\u2192pack) com tempos; hdl_codegen / hdl_sim (VCD, asserts) e packs.","title":"M3 \u2014 Dom\u00ednios (D36\u2013D65)"},{"location":"ProjetoFinal/#m4-operacao-critica-e-sre-d66d90","text":"Policies duras (PII/local-only, DUAL_CONTROL, janelas); M\u00e9tricas Prometheus, exports Parquet/Arrow; caos/staging; \u00e2ncoras Merkle.","title":"M4 \u2014 Opera\u00e7\u00e3o cr\u00edtica e SRE (D66\u2013D90)"},{"location":"ProjetoFinal/#13-criterios-de-aceite","text":"Determinismo (Ci\u00eancia/HDL) : replay reproduz artefatos byte-a-byte (hashes id\u00eanticos). VCX : pipelines com tempos por etapa no recibo; verify() OK do pack. Sem\u00e2nticos : Text\u2192JSON v\u00e1lido no 1\u00ba ou 2\u00ba reparo; schema registrado no recibo. Opera\u00e7\u00e3o cr\u00edtica : SLOs (TTFT p95 \u2264 4s; TTR p95 \u2264 9s); reassign no lease expirado; DUAL_CONTROL efetivo. UI : PWA instal\u00e1vel; stream est\u00e1vel; \u201c\ud83d\udcdc Recibo\u201d completo. Assinaturas : todos recibos assinados; rota\u00e7\u00e3o de kid valid\u00e1vel.","title":"13) Crit\u00e9rios de aceite"},{"location":"ProjetoFinal/#14-riscos-mitigacoes","text":"AV1 CPU : presets ajust\u00e1veis; kernels wgpu para filtros; paraleliza\u00e7\u00e3o por GOP. Determinismo de libs : trave de vers\u00f5es; seeds; KATs regulares; modo \u201cno network\u201d. QUIC atr\u00e1s de proxies : fallback WS/443; keep-alive agressivo. Crescimento de estado : reten\u00e7\u00e3o configur\u00e1vel; snapshots Parquet/Arrow; \u00e2ncoras Merkle.","title":"14) Riscos &amp; mitiga\u00e7\u00f5es"},{"location":"ProjetoFinal/#15-implantacao-e-operacao","text":"Single binary : aurea serve --db ./aurea.redb --listen 0.0.0.0:8080 . Chaves : diret\u00f3rio keys/ com kid atual e hist\u00f3ricos; rota\u00e7\u00e3o di\u00e1ria/semanal. Config : TOML com policies, quotas, janelas e roteamento de t\u00f3picos. Backup : redb + snapshots de recibos/artefatos; exports peri\u00f3dicos Parquet/Arrow.","title":"15) Implanta\u00e7\u00e3o e opera\u00e7\u00e3o"},{"location":"ProjetoFinal/#16-testes-e-validacao","text":"Unit/integration para contratos, hashing can\u00f4nico, idempot\u00eancia e leases. KATs por dom\u00ednio (ci\u00eancia, VCX, HDL) com packs fixos. Fuzz/proptest para HDL sob feature=verify . Chaos em staging (lat\u00eancia/falhas controladas, reassign validado).","title":"16) Testes e valida\u00e7\u00e3o"},{"location":"ProjetoFinal/#17-governanca-e-licenca","text":"Apache-2.0 para n\u00facleo e plugins oficiais. Plugins privados por dom\u00ednio podem viver fora (respeitando contrato). Semver estrito ; schema_id/v carimbado em recibos; sem vers\u00f5es m\u00e1gicas .","title":"17) Governan\u00e7a e licen\u00e7a"},{"location":"ProjetoFinal/#18-entregaveis","text":"Bin\u00e1rio aurea (serve/worker/pack). Crates: core , storage , runtime , artifacts/vcx_pack , plugins/* . UI PWA integrada. Documenta\u00e7\u00e3o de API/Schema, guias de opera\u00e7\u00e3o e de compliance. Conjunto de KATs e packs de refer\u00eancia.","title":"18) Entreg\u00e1veis"},{"location":"ProjetoFinal/#19-exemplo-de-contrato-e-handler","text":"// Contrato #[derive(serde::Serialize, serde::Deserialize, schemars::JsonSchema)] pub struct VcxSpec { pub ops: Vec<VcxOp> } #[derive(serde::Serialize, serde::Deserialize, schemars::JsonSchema)] #[serde(tag=\"op\", rename_all=\"snake_case\")] pub enum VcxOp { Resize{w:u32,h:u32}, EncodeAv1{preset:u8} } // Handler #[work(topic=\"vcx:graph\")] fn vcx_graph(spec: VcxSpec, ctx: Ctx) -> anyhow::Result<VcxResult> { let mut pack = ctx.pack_begin(\"vcx-output\")?; let t0 = ctx.stage_start(\"resize\"); let img = resize(spec, ctx.inputs())?; ctx.stage_end(\"resize\", t0); let t1 = ctx.stage_start(\"encode_av1\"); let av1 = encode_av1(img, spec)?; ctx.stage_end(\"encode_av1\", t1); pack.add(\"out/video.ivf\", &av1)?; let pack_cid = ctx.pack_close(pack)?; Ok(VcxResult{ pack_cid }) }","title":"19) Exemplo de contrato e handler"},{"location":"ProjetoFinal/#20-plano-de-adocao","text":"Lab piloto com ci\u00eancia reprodut\u00edvel e VCX simples. Expandir para HDL com VCD/netlists e KATs. Adicionar operadores sem\u00e2nticos com schemas de dom\u00ednio. Ativar policies duras e \u00e2ncoras em produ\u00e7\u00e3o.","title":"20) Plano de ado\u00e7\u00e3o"},{"location":"ProjetoFinal/#pronto-para-construcao","text":"O esqueleto inicial j\u00e1 est\u00e1 dispon\u00edvel e compil\u00e1vel. Pr\u00f3xima a\u00e7\u00e3o recomendada: implementar M1 (idempot\u00eancia por hash, leases redb, UI forms por schema) no bin\u00e1rio \u00fanico e habilitar assinatura de recibos . Isso libera fluxos reais de ci\u00eancia/VCX/HDL com rastreabilidade completa.","title":"Pronto para constru\u00e7\u00e3o"},{"location":"ProjetoFinal/#prompt","text":"Se o operador for um LLM que conversa com o humano e confirma a\u00e7\u00f5es, conseguimos por mais complexidade \"dentro\" pra ficar com ux humana mais livre?","title":"Prompt:"},{"location":"ProjetoFinal/#response","text":"Thought for 5s Sim \u2014 d\u00e1 para \u201centuchar\u201d bastante complexidade dentro do operador e manter a UX humana leve, desde que o LLM trabalhe sob contratos e fases . Abaixo est\u00e1 o padr\u00e3o que recomendo para o \u00c1UREA.","title":"Response:"},{"location":"ProjetoFinal/#padrao-operador-conversacional-oc","text":"Um plugin que conversa em linguagem natural e, por baixo, produz/valida WorkUnit<T> e WorkResult<R> contra schemas . Ele faz: entender inten\u00e7\u00e3o, preencher slots, planejar, simular (dry-run), pedir confirma\u00e7\u00e3o e s\u00f3 ent\u00e3o commit .","title":"Padr\u00e3o: Operador Conversacional (OC)"},{"location":"ProjetoFinal/#fases-de-fora-parece-um-chat-por-dentro-e-uma-esteira","text":"NL \u2192 Inten\u00e7\u00e3o + Slots Extra\u00e7\u00e3o para ActionDraft{action_id, slots, constraints, deadline?} Valida\u00e7\u00e3o imediata via JSON Schema do dom\u00ednio (reduz alucina\u00e7\u00e3o). Planejamento Gera um DAG de opera\u00e7\u00f5es (ex.: VCX \u2192 resize\u2192encode AV1\u2192pack). Estima custos/tempos (quotas) e pol\u00edticas aplic\u00e1veis (PII/local-only, DUAL_CONTROL, janela). Dry-run / Pr\u00e9-visualiza\u00e7\u00e3o Gera diff/preview do que vai acontecer: artefatos esperados, SLOs, custo estimado, impactos. Produz um Receipt ephemeral (n\u00e3o assinado) com policy_trace e or\u00e7amentos. Confirma\u00e7\u00e3o O OC pede um \u201cOK\u201d expl\u00edcito com frase de compromisso (ex.: confirm: \"DUAL_CONTROL\" quando o t\u00f3pico termina com :commit ). Idempot\u00eancia por hash do plano ( idem_key = blake3(dag_canon) ). Commit Emite WorkUnit definitivo para o t\u00f3pico de execu\u00e7\u00e3o ( vcx:graph , science:run , hdl:sim \u2026), assina recibo real, ancora (Merkle opcional). Stream \u00fanico: accepted \u2192 assigned \u2192 progress{\u2026} \u2192 result|fail . P\u00f3s-execu\u00e7\u00e3o OC agrega o Receipt e links de artefatos/VCX-PACK numa mensagem final, oferecendo Replay e Rollback (se aplic\u00e1vel). Para o usu\u00e1rio \u00e9 \u201cfale o que quer \u2192 veja um cart\u00e3o com o plano \u2192 confirme\u201d. Sem formulari\u00f5es; sem idas e vindas.","title":"Fases (de fora parece \u201cum chat\u201d, por dentro \u00e9 uma esteira)"},{"location":"ProjetoFinal/#como-isso-esconde-complexidade-com-seguranca","text":"Schema-driven : o OC s\u00f3 prop\u00f5e a\u00e7\u00f5es que existem no registry de capacidades (schemas exportados pelos plugins). Slot-filling robusto : o LLM tenta preencher campos faltantes; se n\u00e3o couber no schema, ele auto-repara at\u00e9 N itera\u00e7\u00f5es. Pol\u00edticas antes da fila : pii_local pode reescrever o plano (trocar worker remoto por local) antes de enfileirar. Dois est\u00e1gios : :propose (ephemeral, barato) \u2192 :commit (assinado). Quotas expl\u00edcitas : o cart\u00e3o de confirma\u00e7\u00e3o sempre mostra tokens/time/custos e janelas (quando pode rodar). Idempot\u00eancia por plano : repetir \u201cOk, manda bala\u201d n\u00e3o duplica execu\u00e7\u00e3o. Audit trail : todo racioc\u00ednio externo vira policy_trace e m\u00e9tricas; o racioc\u00ednio interno n\u00e3o precisa ser exposto.","title":"Como isso \u201cesconde\u201d complexidade (com seguran\u00e7a)"},{"location":"ProjetoFinal/#contratos-minimos-exemplos","text":"// Pedido em linguagem natural \u2192 rascunho de a\u00e7\u00e3o #[derive(Serialize, Deserialize, JsonSchema)] pub struct ActionDraft { pub action_id: String, // ex.: \"vcx.batch_transcode\" pub slots: serde_json::Value, // j\u00e1 validado contra o schema do action_id pub constraints: Option<serde_json::Value>, pub deadline_utc: Option<String>, } // Plano/DAG proposto #[derive(Serialize, Deserialize, JsonSchema)] pub struct PlanPreview { pub dag: serde_json::Value, // DAG can\u00f4nico (ordenado) pub quotas: Quotas, // tokens/time/compute pub policy_trace: Vec<PolicyEntry>, // o que ser\u00e1 exigido pub estimated_ttft_ms: u32, pub estimated_ttr_ms: u32 } // Confirma\u00e7\u00e3o #[derive(Serialize, Deserialize, JsonSchema)] pub struct CommitRequest { pub plan_hash: String, // blake3(dag_canon) pub confirm_phrase: Option<String>, // ex.: \"DUAL_CONTROL\" }","title":"Contratos m\u00ednimos (exemplos)"},{"location":"ProjetoFinal/#ux-no-chat-uma-timeline-zero-atrito","text":"Mensagem do humano: \u201cConverte esses 20 v\u00eddeos pra 1080p, manda link pro time A at\u00e9 amanh\u00e3.\u201d OC responde com um card de plano : \u201cVou: extrair 20 itens da pasta X \u2192 resize(1920x1080) \u2192 encode_av1(preset 6) \u2192 pack \u2192 notify:teamA .\u201d SLOs e custos previstos, janelas/policies aplicadas. Bot\u00f5es: Confirmar , Editar (abre slots), Agendar . Ao confirmar, o stream mostra progresso por etapa; no fim, aparece \ud83d\udcdc Recibo (assinado) e Baixar VCX-PACK .","title":"UX no chat (uma timeline, zero atrito)"},{"location":"ProjetoFinal/#exemplos-por-dominio","text":"","title":"Exemplos por dom\u00ednio"},{"location":"ProjetoFinal/#vcx","text":"\u201cPadroniza pra 1080p e AV1, manda pro time A.\u201d \u2192 OC resolve slots (preset, CRF, FPS), verifica PII (n\u00e3o se aplica), estima TTR, pede confirma\u00e7\u00e3o, executa vcx:graph , anexa pack e envia notify .","title":"VCX"},{"location":"ProjetoFinal/#ciencia-reprodutivel","text":"\u201cReproduz o experimento X com seed 1337 e compara com refer\u00eancia.\u201d \u2192 OC monta ExperimentSpec , injeta seed, bloqueia rede se policy pedir, aciona exp_runner , depois exp_ingest (KAT). Entrega diff e recibo.","title":"Ci\u00eancia reprodut\u00edvel"},{"location":"ProjetoFinal/#hdl","text":"\u201cGera HDL do m\u00f3dulo Y, roda sim por 10k ciclos e me d\u00e1 VCD.\u201d \u2192 OC monta hdl_codegen + hdl_sim , fixa TZ/clock/seed, produz pack com VCD/netlist; confirma\u00e7\u00e3o inclui tempo/capacidade do worker.","title":"HDL"},{"location":"ProjetoFinal/#controles-que-mantem-tudo-livre-mas-seguro","text":"Lista branca de a\u00e7\u00f5es (capabilities do registry) \u2014 nada fora do contrato. Campos obrigat\u00f3rios sempre destacados no card; se o LLM n\u00e3o conseguir inferir, pede s\u00f3 o m\u00ednimo essencial. DUAL_CONTROL para t\u00f3picos *:commit . Local-only for\u00e7a workers locais automaticamente, sem o humano precisar saber. Dry-run econ\u00f4mico: nunca queima quota pesada antes do OK. Rollback/Replay direto no recibo.","title":"Controles que mant\u00eam tudo \u201clivre, mas seguro\u201d"},{"location":"ProjetoFinal/#como-integrar-no-aurea-agora","text":"Registrar capacidades : cada plugin exp\u00f5e schema/action_id via endpoint ( /v1/schema/index ). Criar o OC no plugins/op_llm_json com tr\u00eas traits: Intent , Planner , Confirmer . Implementar :propose \u2192 :commit como dois t\u00f3picos internos (o primeiro n\u00e3o assina; o segundo assina). UI : componente Leptos PlanCard (renderiza a partir do PlanPreview ), com bot\u00f5es Confirmar/Editar/Agendar . Pol\u00edticas : hooks do OC chamam policy.evaluate() antes de enfileirar (aplica rota/quotas/local-only). Idempot\u00eancia : idem_key = blake3(dag_canon) no CommitRequest .","title":"Como integrar no \u00c1UREA agora"},{"location":"ProjetoFinal/#ganhos-praticos","text":"Menos idas e vindas : o OC resolve slots, valida e s\u00f3 te incomoda para o \u201cOK\u201d (ou um campo cr\u00edtico). Erros precocemente baratos : problemas aparecem no dry-run (policies, quotas, prazos). Risco controlado : nada roda \u201cde verdade\u201d sem confirma\u00e7\u00e3o, recibos s\u00e3o assinados e audit\u00e1veis. Mesma UX para tudo : VCX, ci\u00eancia e HDL se comportam como \u201cconversas com cart\u00f5es\u201d. Se quiser, eu j\u00e1 adapto o op_llm_json do esqueleto para incluir Intent \u2192 PlanPreview \u2192 Commit e te deixo um exemplo real de VCX batch com card de confirma\u00e7\u00e3o e idempot\u00eancia por hash do plano.","title":"Ganhos pr\u00e1ticos"},{"location":"ProjetoFinal/#prompt_1","text":"Esse \u00e9 o plano! Formalizar deixando o interior tb LLM friendly","title":"Prompt:"},{"location":"ProjetoFinal/#response_1","text":"Perfeito. Abaixo est\u00e1 a Especifica\u00e7\u00e3o V1 \u2014 \u00c1UREA com interior LLM-friendly , formalizando interfaces, contratos e o Operador Conversacional (OC) para que a UX seja \u201cfale\u2192confirme\u2192execute\u201d, enquanto o interior continua 100% tipado, verific\u00e1vel e seguro.","title":"Response:"},{"location":"ProjetoFinal/#1-principios-llm-friendly","text":"Tudo \u00e9 Schema : cada a\u00e7\u00e3o publica JSON Schema (+ exemplos) e um \u201ctool spec\u201d claro para LLMs. Dois est\u00e1gios : :propose (barato, ephemero, sem efeitos) \u2192 :commit (executa, assina, ancora). Idempot\u00eancia por plano : idem_key = blake3(dag_canon) . Repetir \u201cOK\u201d n\u00e3o duplica execu\u00e7\u00e3o. Auto-reparo limitado : OC tenta reparar JSON inv\u00e1lido at\u00e9 N=2 itera\u00e7\u00f5es; depois pede 1 campo humano. Privacidade de racioc\u00ednio : sem exigir cadeia de pensamento; OC retorna apenas dados estruturados + justificativas curtas. Pol\u00edticas antes da fila : DUAL_CONTROL/PII/local-only aplicadas no :propose , com tra\u00e7o explicativo no preview.","title":"1) Princ\u00edpios LLM-friendly"},{"location":"ProjetoFinal/#2-registro-de-capacidades-capability-registry","text":"Endpoint: GET /v1/capabilities { \"version\": \"1.0\", \"capabilities\": [ { \"action_id\": \"vcx.batch_transcode\", \"schema_id\": \"aurea.vcx.batch_transcode\", \"schema_v\": 1, \"summary\": \"Transcodifica lista de m\u00eddias p/ alvo padronizado.\", \"examples\": [\"Padroniza 1080p AV1 para pasta X e notifica time A.\"], \"topics\": { \"commit\": \"vcx:graph\", \"propose\": \"vcx:propose\" } } ] }","title":"2) Registro de Capacidades (Capability Registry)"},{"location":"ProjetoFinal/#3-convencoes-de-schema-json-schema-canonico","text":"Campos padr\u00e3o : @type , @ver , schema_id , schema_v . Enums/tags : #[serde(tag=\"op\", rename_all=\"snake_case\")] para variantes. Exemplos e hints : incluir x-ui e x-llm (metadados amig\u00e1veis ao LLM). Canoniza\u00e7\u00e3o : JSON can\u00f4nico para hashing (ordem est\u00e1vel, sem floats n\u00e3o determin\u00edsticos). Exemplo (resumo) \u2014 aurea.vcx.batch_transcode@1 : { \"$id\": \"aurea.vcx.batch_transcode#1\", \"type\": \"object\", \"required\": [\"inputs\", \"video\", \"notify\"], \"properties\": { \"inputs\": { \"type\": \"array\", \"items\": { \"type\": \"string\", \"format\": \"uri\" }, \"minItems\": 1, \"description\": \"URIs ou IDs internos de m\u00eddias de entrada\" }, \"video\": { \"type\": \"object\", \"required\": [\"width\",\"height\",\"codec\"], \"properties\": { \"width\": {\"type\":\"integer\",\"minimum\":16}, \"height\":{\"type\":\"integer\",\"minimum\":16}, \"codec\": {\"enum\": [\"av1\"]}, \"preset\": {\"type\":\"integer\",\"minimum\":0,\"maximum\":10}, \"crf\": {\"type\":\"integer\",\"minimum\":0,\"maximum\":63}, \"fps\": {\"type\":\"number\",\"minimum\":1} }, \"x-llm\": { \"defaults\": {\"codec\":\"av1\",\"preset\":6,\"crf\":28,\"fps\":30} } }, \"notify\": { \"type\": \"object\", \"required\": [\"channel\"], \"properties\": { \"channel\":{\"type\":\"string\"}, \"message\":{\"type\":\"string\"} } }, \"deadline_utc\": {\"type\":\"string\",\"format\":\"date-time\"} } }","title":"3) Conven\u00e7\u00f5es de Schema (JSON Schema, can\u00f4nico)"},{"location":"ProjetoFinal/#4-operador-conversacional-oc-contratos","text":"","title":"4) Operador Conversacional (OC) \u2014 Contratos"},{"location":"ProjetoFinal/#41-intencao-slots","text":"{ \"@type\":\"aurea/intent.v1\", \"action_id\":\"vcx.batch_transcode\", \"slots\": { \"...\": \"valores j\u00e1 validados contra o schema do action_id\" }, \"constraints\": { \"window\":\"business_hours\", \"local_only\":true }, \"deadline_utc\":\"2026-02-20T17:00:00Z\" }","title":"4.1 Inten\u00e7\u00e3o &amp; Slots"},{"location":"ProjetoFinal/#42-planopreview-ephemero","text":"{ \"@type\":\"aurea/plan_preview.v1\", \"plan_hash\":\"b3_..._abcd\", \"dag\": { \"nodes\":[...], \"edges\":[...] }, // can\u00f4nico \"quotas\": { \"tokens\": 0, \"time_ms\": 540000 }, \"policy_trace\": [ {\"rule\":\"pii_local\",\"ok\":true}, {\"rule\":\"window\",\"ok\":true} ], \"estimated_ttft_ms\": 800, \"estimated_ttr_ms\": 300000, \"artifacts_preview\":[{\"kind\":\"pack\",\"label\":\"vcx-output\",\"est_size\":\"~4.2GB\"}], \"confirm_required\": \"DUAL_CONTROL\" // ou null }","title":"4.2 Plano/Preview (ephemero)"},{"location":"ProjetoFinal/#43-confirmacao-commit","text":"{ \"@type\":\"aurea/commit_request.v1\", \"plan_hash\":\"b3_..._abcd\", \"confirm_phrase\":\"DUAL_CONTROL\", \"idem_key\":\"b3_..._abcd\", // = plan_hash \"tenant\":\"acme\" }","title":"4.3 Confirma\u00e7\u00e3o \u2192 Commit"},{"location":"ProjetoFinal/#5-topicos-e-estados-fsm","text":"T\u00f3picos Proposi\u00e7\u00e3o: *:propose (sem assinatura; guarda preview opcional com TTL curto). Execu\u00e7\u00e3o: *:commit \u2192 enfileira em vcx:graph , science:run , hdl:sim , etc. Estados (stream \u00fanico) accepted \u2192 assigned \u2192 progress{stage,time_ms,meta?} \u2192 result{...} | fail{error_code, details} C\u00f3digos de erro (curtos, operacionais) SCHEMA_INVALID , SLOT_MISSING , POLICY_BLOCKED , LEASE_EXPIRED , WORKER_UNAVAILABLE , ARTIFACT_VERIFY_FAIL , TIME_BUDGET_EXCEEDED","title":"5) T\u00f3picos e Estados (FSM)"},{"location":"ProjetoFinal/#6-apis-http3-sse","text":"GET /v1/capabilities \u2192 registry GET /v1/schema/{schema_id}/{v} \u2192 JSON Schema POST /v1/oc/parse_intent \u2192 Intent (OC interpreta NL\u2192slots v\u00e1lidos) POST /v1/oc/plan_preview \u2192 PlanPreview (aplica policies/quotas) POST /v1/oc/commit \u2192 {status, receipt_cid} GET /v1/stream?tenant=&topic=&id= \u2192 SSE estados GET /v1/receipts/{cid} \u2192 Receipt assinado POST /v1/verify/pack \u2192 {\"ok\":true,\"issues\":[]} GET /v1/metrics (Prometheus) | POST /v1/export?format=parquet|arrow","title":"6) APIs (HTTP/3 + SSE)"},{"location":"ProjetoFinal/#7-tool-spec-p-llms-funcoes-chamaveis","text":"","title":"7) Tool Spec p/ LLMs (fun\u00e7\u00f5es cham\u00e1veis)"},{"location":"ProjetoFinal/#71-list_capabilities","text":"input : {} output : {\"capabilities\":[{action_id,schema_id,schema_v,summary}]}","title":"7.1 list_capabilities"},{"location":"ProjetoFinal/#72-get_schema","text":"input : {\"schema_id\":\"aurea.vcx.batch_transcode\",\"schema_v\":1} output : JSON Schema","title":"7.2 get_schema"},{"location":"ProjetoFinal/#73-propose_plan","text":"input : ActionDraft (inten\u00e7\u00e3o+slots) output : PlanPreview ou erro SCHEMA_INVALID com repair_hints[]","title":"7.3 propose_plan"},{"location":"ProjetoFinal/#74-commit_plan","text":"input : CommitRequest output : {status:\"accepted\", \"receipt_cid\":\"rcpt-...\"}","title":"7.4 commit_plan"},{"location":"ProjetoFinal/#75-replay_from_receipt","text":"input : {\"receipt_cid\":\"rcpt-...\",\"override?\":{}} output : {status, new_receipt_cid} Esses \u201ctools\u201d s\u00e3o est\u00e1veis para function-calling/Actions de qualquer provedor.","title":"7.5 replay_from_receipt"},{"location":"ProjetoFinal/#8-auto-reparo-e-limites","text":"Loop de reparo : at\u00e9 2 tentativas: Validar slots contra schema \u2192 se falhar, gerar repair_patch minimal (ex.: preencher preset , crf , normalizar fps inteiro). Se ainda inv\u00e1lido, pedir apenas os campos faltantes numa \u201cmensagem curta de solicita\u00e7\u00e3o\u201d (texto curto + lista de campos). Campos perigosos : bloqueados por policy ( local_only , dual_control , max_duration_ms , allowed_codecs ).","title":"8) Auto-reparo e limites"},{"location":"ProjetoFinal/#9-politicas-llm-aware","text":"OC chama policy.evaluate(Intent|Plan) antes de enfileirar. Exemplo de regras: pii_local : se inputs apontam para espa\u00e7o PII, route=LocalOnly e capabilities=[\"local_gpu\",\"no_network\"] . window : deadline_utc fora da janela \u2192 agenda (OC sugere schedule_at ). commitment : a\u00e7\u00f5es com efeitos externos exigem confirm_phrase:\"DUAL_CONTROL\" . policy_trace sempre vem no PlanPreview e no Receipt .","title":"9) Pol\u00edticas (LLM-aware)"},{"location":"ProjetoFinal/#10-recibos-e-assinaturas","text":"Receipt inclui: work_hash , result_hash , policy_trace[] , ttft_ms , ttr_ms , signatures[] , artifacts[] (pack_cid, entries[]) , schema_id/v . Assinatura : ed25519 ( alg:\"Ed25519\" , key_id:\"kid-2026-02-01\" , sig:base64 ). \u00c2ncoras Merkle : raiz di\u00e1ria armazenada e exposta em /v1/anchors/YYYY-MM-DD .","title":"10) Recibos e Assinaturas"},{"location":"ProjetoFinal/#11-observabilidade-sre","text":"M\u00e9tricas: aurea_ttft_ms{topic} aurea_ttr_ms{topic} aurea_queue_depth{topic} aurea_reassigns_total{topic} aurea_error_rate{topic,error_code} Export: /v1/export?format=parquet&since=... com receipts , stages , artifacts .","title":"11) Observabilidade (SRE)"},{"location":"ProjetoFinal/#12-ux-chat-cartao-confirmar","text":"Card do Plano renderizado de PlanPreview : Resumo em 3 linhas, lista de etapas, custos/SLOs , policy_trace . Bot\u00f5es: Confirmar , Editar campos (renderizados via schema), Agendar . Confirmou? Stream mostra accepted/assigned/progress/result + link \ud83d\udcdc Recibo e Baixar VCX-PACK .","title":"12) UX (chat \u2192 cart\u00e3o \u2192 confirmar)"},{"location":"ProjetoFinal/#13-exemplos-rapidos","text":"","title":"13) Exemplos r\u00e1pidos"},{"location":"ProjetoFinal/#131-requisicao-natural-oc","text":"Usu\u00e1rio: \u201cConverte 20 v\u00eddeos da pasta /lab/raw para 1080p AV1 e avisa o time A. Entrega at\u00e9 amanh\u00e3.\u201d Fluxo interno: list_capabilities \u2192 encontra vcx.batch_transcode . get_schema \u2192 aplica defaults ( preset=6, crf=28, fps=30 ). propose_plan \u2192 PlanPreview{plan_hash=..., policy_trace=[window:ok, pii_local:false]} . UI mostra card \u2192 usu\u00e1rio clica Confirmar . commit_plan{plan_hash, confirm_phrase?} \u2192 {status:\"accepted\",receipt_cid:\"rcpt-...\"} . Stream + Recibo assinado.","title":"13.1 Requisi\u00e7\u00e3o natural \u2192 OC"},{"location":"ProjetoFinal/#132-falta-um-slot","text":"Se fps omitido \u2192 OC tenta 30 . Se schema exigir inteiro e veio 29.97 , auto-repara para 30 . Ainda falhou? Pede s\u00f3 fps .","title":"13.2 Falta um slot"},{"location":"ProjetoFinal/#14-roadmap-llm-friendly-incremental","text":"Fase A : publicar capabilities+schemas+examples; implementar propose_plan/commit_plan ; UI Card. Fase B : reparo autom\u00e1tico + dif de planos (explicativo) + idempot\u00eancia por plano. Fase C : pol\u00edticas duras (DUAL_CONTROL/local-only/janelas) + anchors. Fase D : agents externos (CLI/mobile) usando o mesmo tool spec.","title":"14) Roadmap LLM-friendly (incremental)"},{"location":"ProjetoFinal/#entregaveis-desta-especificacao","text":"Endpoints e modelos JSON acima implementados no aurea serve . Registry de capacidades com schemas versionados e exemplos. OC dentro de plugins/op_llm_json com fases: Intent \u2192 Plan \u2192 Commit . UI Leptos com PlanCard e formul\u00e1rios auto-gerados pelo schema. Valida\u00e7\u00e3o, auto-reparo (N=2), idempot\u00eancia por plan_hash , assinatura de recibos e m\u00e9tricas SRE. Com isso, a \u201cconversa\u201d vira a interface \u2014 e a complexidade fica dentro, contratualizada e audit\u00e1vel, sem atrito para quem usa. Quer que eu j\u00e1 atualize o esqueleto para incluir capabilities , oc/* (endpoints), PlanCard e um exemplo completo de vcx.batch_transcode ?","title":"Entreg\u00e1veis desta especifica\u00e7\u00e3o"},{"location":"ProjetoFinal/#prompt_2","text":"o plano completo s\u00e3o as 2 mensagens \u00faltimas n\u00e9?","title":"Prompt:"},{"location":"ProjetoFinal/#response_2","text":"Sim. O plano completo est\u00e1 nas duas \u00faltimas mensagens : Padr\u00e3o do Operador Conversacional (OC) \u2014 como o LLM conduz inten\u00e7\u00e3o \u2192 plano \u2192 confirma\u00e7\u00e3o \u2192 execu\u00e7\u00e3o, com dry-run, idempot\u00eancia por plano e pol\u00edticas aplicadas antes da fila. Especifica\u00e7\u00e3o V1 LLM-friendly \u2014 formaliza\u00e7\u00e3o dos contratos e APIs: Registry de capacidades + JSON Schemas e metadados x-llm . Objetos Intent , PlanPreview , CommitRequest e FSM de estados. Endpoints ( /v1/oc/* , schemas, receipts, metrics, export). Tool spec para function-calling (list/get/propose/commit/replay). Policies, assinaturas, \u00e2ncoras Merkle, m\u00e9tricas SRE e UI PlanCard. Roadmap de implementa\u00e7\u00e3o. Se quiser, junto tudo em um \u00fanico doc Markdown (ou PDF) com \u00edndice e links entre se\u00e7\u00f5es.","title":"Response:"},{"location":"ProjetoFinal/#prompt_3","text":"Fazer pesquisa ampla na internet sobre softwares que tentam a reprodutibilidade de experimentos cient\u00edficos - o que fazem, como fazem e as dores","title":"Prompt:"},{"location":"ProjetoFinal/#response_3","text":"Thought for 24s Perfeito, Dan! Fiz uma varredura ampla e organizei o panorama em 6 \u201cfam\u00edlias\u201d de solu\u00e7\u00f5es para reprodutibilidade computacional \u2014 com exemplos, como fazem e as dores t\u00edpicas que relatam. No fim, deixo um mapa das principais lacunas onde o \u00c1UREA pode brilhar.","title":"Response:"},{"location":"ProjetoFinal/#1-empacotamentocapsulas-executaveis","text":"O que fazem: empacotam c\u00f3digo+ambiente+dados e (\u00e0s vezes) resultados numa \u201cc\u00e1psula\u201d que pode ser reexecutada noutro lugar. Como fazem: tra\u00e7am depend\u00eancias e congelam ambiente (sistemas, libs, vari\u00e1veis) e inputs, depois geram um pacote com manifesto/proveni\u00eancia; alguns d\u00e3o DOI e hist\u00f3rico. Exemplos: ReproZip/ReproServer : captura execu\u00e7\u00f5es e gera um bundle .rpz ; reexecuta em diversos \u201cunpackers\u201d (sem lock-in). reprozip.org+2docs.libnova.com+2 Code Ocean : \u201ccompute capsules\u201d imut\u00e1veis com lineage graph, versionamento, DOI/publish. codeocean.com+2library.hkust.edu.hk+2 Whole Tale : \u201ctales\u201d como objetos de pesquisa execut\u00e1veis (dados+ambiente+c\u00f3digo+metadados). wholetale.org+2labs.globus.org+2 RO-Crate / Workflow RO-Crate : padr\u00e3o para empacotar objetos (dados, software, workflows) com metadados FAIR e perfis para runs (proveni\u00eancia de execu\u00e7\u00f5es). researchobject.org+3researchobject.org+3RDA+3 Dores comuns: drift do ambiente com o tempo, formatos/ontologias diferentes de proveni\u00eancia, dados sens\u00edveis e acesso a reposit\u00f3rios externos. ScienceDirect+1","title":"1) Empacotamento/c\u00e1psulas execut\u00e1veis"},{"location":"ProjetoFinal/#2-orquestradoresworkflow-engines","text":"O que fazem: definem pipelines determin\u00edsticos, paralelizam, escalam em HPC/cloud e integram containers para portabilidade. Como fazem: linguagens declarativas (Snakefile, Nextflow DSL, CWL), execu\u00e7\u00e3o com Docker/Apptainer, caching, al\u00e9m de cat\u00e1logos comunit\u00e1rios (nf-core, WorkflowHub). Exemplos: Snakemake : workflows declarados em Python; descrevem softwares e implantam automaticamente; documenta\u00e7\u00e3o foca em portabilidade e reprodutibilidade. snakemake.readthedocs.io+1 Nextflow : executa com Docker/Apptainer/Podman; mesma pipeline roda em qualquer Unix; integra\u00e7\u00e3o com Git e nf-core. nextflow.io+1 Galaxy : plataforma web multi-usu\u00e1rio com workflows reprodut\u00edveis e biblioteca p\u00fablica; integra reposit\u00f3rios de dados (ex.: Dataverse) e fornece DOIs para workflows curados. OUP Academic+2iwc.galaxyproject.org+2 WorkflowHub (registro): publica/descobre workflows com RO-Crate , CWL, TRS; promove workflows como objetos FAIR. workflowhub.eu+2Nature+2 Dores comuns: falhas de reexecu\u00e7\u00e3o autom\u00e1tica por depend\u00eancias externas, falta de padr\u00f5es interoper\u00e1veis de proveni\u00eancia (da\u00ed o avan\u00e7o do Workflow Run RO-Crate ). mir.cs.illinois.edu+1","title":"2) Orquestradores/workflow engines"},{"location":"ProjetoFinal/#3-notebooks-reproduziveis-ensinodemos","text":"O que fazem: tornam reposit\u00f3rios execut\u00e1veis em um clique para ensino, revis\u00e3o e demo. Como fazem: Binder/BinderHub constr\u00f3i imagens a partir de environment.yml / requirements.txt / Dockerfile e sobe um Jupyter ef\u00eamero. jupyter.org+2mybinder.org+2 Dores: limites de recursos/tempo, falta de GPU persistente, e depend\u00eancia de arquivos de configura\u00e7\u00e3o bem mantidos. earth-env-data-science.github.io","title":"3) Notebooks reproduz\u00edveis (ensino/demos)"},{"location":"ProjetoFinal/#4-gestao-de-dados-versoes-e-proveniencia","text":"O que fazem: versionam datasets e modelos, ligam execu\u00e7\u00f5es a artefatos, e preservam o lineage (quem gerou o qu\u00ea, quando e como). Como fazem: sobre Git/git-annex e/ou armazenamento de objetos; logs de execu\u00e7\u00f5es; refer\u00eancias imut\u00e1veis. Exemplos: DataLad : versionamento de dados/cole\u00e7\u00f5es, integra\u00e7\u00e3o com RDM; casos de \u201cpaper reprodut\u00edvel\u201d. datalad.org+1 DVC : extens\u00e3o Git para dados/modelos/experimentos; pipelines reproduz\u00edveis para ML. DVC+1 MLflow : rastreia par\u00e2metros, m\u00e9tricas e artefatos ; registry de modelos para reexecutar/validar. MLflow+1 Pachyderm : pipelines dirigidos a dados com data versioning e lineage autom\u00e1ticos em Kubernetes. GitHub+1 Dores: custo/complexidade de hospedar infra, GC de dados grandes, pol\u00edticas de acesso/PII; necessidade de \u201cglue\u201d para ligar dados\u2194workflow\u2194recibos verific\u00e1veis. Atlan+1","title":"4) Gest\u00e3o de dados, vers\u00f5es e proveni\u00eancia"},{"location":"ProjetoFinal/#5-portais-de-compartilhamentodoi-e-open-science","text":"O que fazem: providenciam dep\u00f3sito/DOI para dados, c\u00f3digo, c\u00e1psulas e materiais; melhoram cita\u00e7\u00e3o e descoberta. Exemplos: OSF (gest\u00e3o do ciclo de pesquisa, preregistro, integra GitHub/Drive); Figshare (reposit\u00f3rio com DOI). cos.io+2Current Protocols+2 Dores: pol\u00edticas desiguais entre peri\u00f3dicos, pouca padroniza\u00e7\u00e3o de \u201co que conta\u201d como material reproduz\u00edvel. Frontiers","title":"5) Portais de compartilhamento/DOI e open science"},{"location":"ProjetoFinal/#6-padroes-de-metadados-e-praticas","text":"O que fazem: definem boas pr\u00e1ticas e padr\u00f5es para tornar pacotes/workflows FAIR e reproduz\u00edveis (PROV, RO-Crate, \u201cTen Simple Rules\u201d). Refer\u00eancias \u00fateis: guias e revis\u00f5es listando barreiras (ambiente, dados restritos, cultura e treino) e recomenda\u00e7\u00f5es. PLOS+2PLOS+2","title":"6) Padr\u00f5es de metadados e pr\u00e1ticas"},{"location":"ProjetoFinal/#padroes-de-como-recorrentes-nos-projetos","text":"Containeriza\u00e7\u00e3o + pin de vers\u00f5es (Docker/Apptainer) p/ isolar depend\u00eancias. nextflow.io+1 Proveni\u00eancia de execu\u00e7\u00e3o (graph/lineage, RO-Crate para runs). codeocean.com+1 Empacotes cit\u00e1veis com manifesto + DOI (capsule/tale/RO-Crate). wholetale.org+1 Registries de workflows (descoberta, vers\u00f5es, testes cont\u00ednuos). iwc.galaxyproject.org Versionamento de dados/modelos e amarra\u00e7\u00e3o aos jobs. datalad.org+1","title":"Padr\u00f5es de \u201ccomo\u201d (recorrentes nos projetos)"},{"location":"ProjetoFinal/#dores-estruturais-sintese","text":"Drift e envelhecimento : ambientes e imagens se tornam irreprodut\u00edveis com o tempo; necessidade de \u201creceipts\u201d verific\u00e1veis e \u00e2ncoras. mir.cs.illinois.edu Dados e acesso : PII, dados propriet\u00e1rios e reposit\u00f3rios privados quebram demos p\u00fablicas; solu\u00e7\u00f5es integram uploads diretos e trilhas audit\u00e1veis. galaxyproject.org Interoperabilidade de proveni\u00eancia : m\u00faltiplos formatos; RO-Crate Run surge para padronizar \u201cexecu\u00e7\u00e3o\u201d. PLOS Custo/infra : operar clusters/containers/registries e armazenar vers\u00f5es \u00e9 caro; GC e pol\u00edticas de reten\u00e7\u00e3o s\u00e3o essenciais. Atlan Cultura e pol\u00edtica editorial : varia\u00e7\u00e3o grande nas exig\u00eancias de reprodutibilidade e pouco reconhecimento formal para software/dados. Frontiers GPU/aleatoriedade : determinismo em ML/AV1/HDL exige seeds, fixar clocks/TZ, desabilitar rede quando necess\u00e1rio (pr\u00e1ticas, n\u00e3o s\u00f3 ferramentas). PLOS","title":"Dores estruturais (s\u00edntese)"},{"location":"ProjetoFinal/#onde-o-aurea-se-encaixa-oportunidades","text":"Recibos fortes : muitos projetos t\u00eam metadata/lineage, poucos entregam receipts assinados com hashes de entrada/sa\u00edda e pol\u00edtica aplicada \u2014 lacuna que o \u00c1UREA cobre nativamente. PLOS Idempot\u00eancia por plano + DUAL_CONTROL/local-only antes da fila: raramente \u00e9 1\u00aa classe fora de dom\u00ednios regulados. Frontiers Pacote universal de artefatos (VCX-PACK) + RO-Crate : interoperar com RO-Crate/WorkflowHub mantendo benef\u00edcios de empacote bin\u00e1rio eficiente. researchobject.org UI conversacional com dry-run : grande parte das plataformas exige formulari\u00f5es; o padr\u00e3o OC do \u00c1UREA reduz atrito sem perder contrato. (Contexto comparado a Code Ocean \u201cpreview\u201d e Galaxy \u201chistory/workflow tests\u201d.) codeocean.com+1","title":"Onde o \u00c1UREA se encaixa (oportunidades)"},{"location":"ProjetoFinal/#lista-curta-de-ferramentas-por-uso","text":"C\u00e1psulas/empacote: ReproZip; Code Ocean; Whole Tale; RO-Crate/Workflow RO-Crate. ScienceInsights+3reprozip.org+3codeocean.com+3 Workflows: Snakemake; Nextflow; Galaxy; CWL (via WorkflowHub). workflowhub.eu+3snakemake.readthedocs.io+3nextflow.io+3 Dados/linhagem: DataLad; DVC; MLflow; Pachyderm. GitHub+3datalad.org+3DVC+3 Notebooks: Binder/BinderHub. jupyter.org Open science/DOI: OSF; Figshare. cos.io+1 Se quiser, converto isso num doc comparativo (tabelado) com crit\u00e9rios (empacote, workflows, proveni\u00eancia, DOI, containers, GPU, PII, pol\u00edticas), marcando onde cada um \u00e9 forte/fraco e adiciono recomenda\u00e7\u00f5es de interoperabilidade direta com o \u00c1UREA (ex.: export de Workflow Run RO-Crate junto do Receipt ).","title":"Lista curta de ferramentas (por uso)"},{"location":"ProjetoFinal/#prompt_4","text":"O que \u00e9 importante incorporar","title":"Prompt:"},{"location":"ProjetoFinal/#response_4","text":"Perfeito \u2014 aqui vai o que vale incorporar j\u00e1 no \u00c1UREA para ficar s\u00f3lido, interoper\u00e1vel e com UX leve, sem perder for\u00e7a t\u00e9cnica.","title":"Response:"},{"location":"ProjetoFinal/#1-padroes-e-interoperabilidade-sem-lock-in","text":"Export/Import RO-Crate (incl. Workflow Run RO-Crate) junto do Receipt : mant\u00e9m FAIR/descoberta e facilita publica\u00e7\u00e3o/DOI. Mapeamento VCX-PACK \u2194 RO-Crate : manifesto \u2192 ro-crate-metadata.json , entries[] \u2192 hasPart[] ; incluir provenance/activity . JSON Schema + \u201ctool spec\u201d por a\u00e7\u00e3o: schema_id/v , exemplos, x-llm (defaults/hints), x-ui (widget/sem\u00e2ntica). CWL/Snakemake/Nextflow adapters (leitura) : importar um pipeline e convert\u00ea-lo para DAG tipado do \u00c1UREA (mesmo que com perda m\u00ednima).","title":"1) Padr\u00f5es e interoperabilidade (sem lock-in)"},{"location":"ProjetoFinal/#2-determinismo-e-proveniencia-by-default","text":"Canonical JSON para hashing (NRF/CID) e idempot\u00eancia por plano (hash do DAG). Seeds/TZ/clock fixos e \u201cno network\u201d opcional por policy; registrar hardware/runtime fingerprint (CPU/GPU, driver, libc). Merkle di\u00e1rio para recibos (root publicado); todas execu\u00e7\u00f5es com assinatura ed25519 e kid rotativo. KATs cont\u00ednuos : toda a\u00e7\u00e3o cr\u00edtica tem exp_ingest /comparador oficial (bit-a-bit para ci\u00eancia/HDL; toler\u00e2ncias documentadas para m\u00eddia/ML).","title":"2) Determinismo e proveni\u00eancia \u201cby default\u201d"},{"location":"ProjetoFinal/#3-politica-e-seguranca-antes-da-fila","text":"Avalia\u00e7\u00e3o de policy no :propose (n\u00e3o no :commit ): local-only/PII , janelas, cotas e DUAL_CONTROL j\u00e1 aparecem no PlanCard . DUAL_CONTROL com frase de compromisso e carimbo no recibo; rastreabilidade do aprovador no policy_trace . Rotas autom\u00e1ticas : se PII ou segredo \u2192 for\u00e7a worker local ; se janela restrita \u2192 agenda em vez de falhar.","title":"3) Pol\u00edtica e seguran\u00e7a antes da fila"},{"location":"ProjetoFinal/#4-dados-e-artefatos-como-1a-classe","text":"Integra\u00e7\u00e3o opcional com DVC/DataLad : gravar no Receipt a refer\u00eancia imut\u00e1vel do dataset/modelo (hash/URL). verify() nativo do VCX-PACK + valida\u00e7\u00e3o de offsets/hashes; policy de reten\u00e7\u00e3o e GC para packs grandes. Cat\u00e1logo de artefatos consult\u00e1vel (por pack_cid , schema_id , tags), com linhagem (quem/qual recibo gerou).","title":"4) Dados e artefatos como 1\u00aa classe"},{"location":"ProjetoFinal/#5-execucao-e-orquestracao-simplificadas","text":"Um bin\u00e1rio ( aurea ) : API+UI+fila/leases+assinaturas+metrics; workers in-proc por padr\u00e3o, QUIC/out-of-proc quando isolar. Leases no redb com reassign autom\u00e1tico; idempot\u00eancia (tenant, topic, idem_key) preenchida por hash do plano se ausente. Estados padronizados num stream: accepted \u2192 assigned \u2192 progress{stage} \u2192 result|fail{code} com tempos por etapa .","title":"5) Execu\u00e7\u00e3o e orquestra\u00e7\u00e3o simplificadas"},{"location":"ProjetoFinal/#6-operador-conversacional-llm-com-contratos","text":"Duas etapas : :propose \u2192 PlanCard (DAG, SLOs, custos, policy_trace) \u2192 Confirmar \u2192 :commit . Auto-reparo N=2 para slots; se falhar, pedir s\u00f3 os campos faltantes (lista curta). Idempot\u00eancia por plano : idem_key = blake3(dag_canon) ; repetir \u201cOK\u201d n\u00e3o duplica.","title":"6) Operador Conversacional (LLM) com contratos"},{"location":"ProjetoFinal/#7-observabilidade-e-slos-operacionais","text":"M\u00e9tricas SRE : ttft_ms , ttr_ms , queue_depth , reassigns , error_rate{code} , stage_time_ms{stage} . Exports Arrow/Parquet e consultas DataFusion; amostras de recibos para auditoria. Or\u00e7amentos em tempo real : mostrar no PlanCard e emitir alerta quando excedidos.","title":"7) Observabilidade e SLOs operacionais"},{"location":"ProjetoFinal/#8-publicacao-e-citabilidade","text":"DOI opcional para packs/execu\u00e7\u00f5es (integra\u00e7\u00e3o OSF/Figshare/Zenodo) via bot\u00e3o \u201cPublicar\u201d no recibo. Manifesto de cita\u00e7\u00e3o (CITATION.cff/RO-Crate) gerado automaticamente com autores, vers\u00e3o e receipt_cid .","title":"8) Publica\u00e7\u00e3o e citabilidade"},{"location":"ProjetoFinal/#9-testes-ci-e-hardening","text":"Testes de determinismo por dom\u00ednio (ci\u00eancia/HDL bit-a-bit; m\u00eddia com thresholds fixos). Chaos/staging com lat\u00eancia/falha/kill para validar reassign e SLOs. Compatibilidade GPU : lista de vers\u00f5es/flags que garantem determinismo (ex.: desativar kernels n\u00e3o determin\u00edsticos quando exigido).","title":"9) Testes, CI e hardening"},{"location":"ProjetoFinal/#prioridade-pratica-o-que-entrar-agora","text":"","title":"Prioridade pr\u00e1tica (o que entrar agora)"},{"location":"ProjetoFinal/#p0-base-impossivel-de-quebrar","text":"Assinatura de recibos + Merkle di\u00e1rio Canonical JSON + idempot\u00eancia por plano Policy no :propose + DUAL_CONTROL Verifica\u00e7\u00e3o VCX-PACK ( verify() ) PlanCard com SLOs/custos/policy_trace","title":"P0 \u2014 Base \u201cimposs\u00edvel de quebrar\u201d"},{"location":"ProjetoFinal/#p1-interop-e-dados","text":"Export RO-Crate (incl. Run) junto do Receipt Refer\u00eancias DVC/DataLad no recibo Adapters de leitura de CWL/Snakemake \u2192 DAG \u00c1UREA","title":"P1 \u2014 Interop e dados"},{"location":"ProjetoFinal/#p2-operacao-e-sre","text":"M\u00e9tricas SRE completas + exports Parquet Chaos/staging + testes de determinismo automatizados","title":"P2 \u2014 Opera\u00e7\u00e3o e SRE"},{"location":"ProjetoFinal/#onde-encaixa-no-monorepo","text":"core/ : canonical JSON, tipos Intent/PlanPreview/CommitRequest . receipts/ (ou dentro do bin\u00e1rio): assinatura, Merkle, verify() de assinatura. artifacts/vcx_pack/ : verify() , mapeamento para RO-Crate. runtime/ : leases, tempos por etapa, roteamento por topic . plugins/op_llm_json/ : :propose \u2192 PlanCard \u2192 :commit com auto-reparo. ui_web/ : PlanCard + \u201c\ud83d\udcdc Recibo\u201d com download/verify/export/DOI. bus/ (ou aurea ): endpoints /v1/capabilities , /v1/oc/* , /v1/export , /v1/anchors/* .","title":"Onde encaixa no monorepo"},{"location":"ProjetoFinal/#aceite-minimo-para-cada-item","text":"Recibo assinado : signatures[].alg=Ed25519 , kid v\u00e1lido, verify_receipt() retorna OK. Merkle : anchors/YYYY-MM-DD.json com root e lista de receipt_cid . PlanCard : mostra policy_trace , SLOs (TTFT/TTR), custos e Confirmar/Agendar/Editar . RO-Crate : arquivo ro-crate-metadata.json alinhado ao pack; run presente quando houver execu\u00e7\u00e3o. Determinismo : replays do mesmo recibo geram hash(es) id\u00eanticos (ou dentro do tolerance configurado/registrado). Se topar, j\u00e1 abro os \u00e9picos: P0-Assinaturas+Merkle , P0-Canonical+Idempot\u00eancia , P0-Policy-Propose+DUAL_CONTROL , P0-PlanCard , P0-VCX-PACK Verify \u2014 e deixo os contratos/rotas prontos para o OC e para o export RO-Crate.","title":"Aceite m\u00ednimo para cada item"},{"location":"adr/ADR-001-canonical-json/","text":"ADR-001 \u2014 Canonical JSON & NRF/CID Status: Accepted Decis\u00e3o: bytes can\u00f4nicos e cid = blake3(nrf_bytes) Consequ\u00eancia: recibos est\u00e1veis e idempot\u00eancia por plano Vetores can\u00f4nicos de teste: qa/fixtures/canon/jcs_vectors_ok.json , qa/fixtures/canon/jcs_vectors_err.json , qa/fixtures/canon/profile_null_strip.json , qa/fixtures/canon/profile_num_norm.json","title":"ADR-001 \u2014 Canonical JSON &amp; NRF/CID"},{"location":"adr/ADR-001-canonical-json/#adr-001-canonical-json-nrfcid","text":"Status: Accepted Decis\u00e3o: bytes can\u00f4nicos e cid = blake3(nrf_bytes) Consequ\u00eancia: recibos est\u00e1veis e idempot\u00eancia por plano Vetores can\u00f4nicos de teste: qa/fixtures/canon/jcs_vectors_ok.json , qa/fixtures/canon/jcs_vectors_err.json , qa/fixtures/canon/profile_null_strip.json , qa/fixtures/canon/profile_num_norm.json","title":"ADR-001 \u2014 Canonical JSON &amp; NRF/CID"},{"location":"adr/ADR-002-policies-propose/","text":"ADR-002 \u2014 Policies no Propose Status: Accepted Decis\u00e3o: avaliar no :propose com policy_trace ; DUAL_CONTROL em *:commit Impacto: menos retrabalho e bloqueios previs\u00edveis","title":"ADR-002 \u2014 Policies no Propose"},{"location":"adr/ADR-002-policies-propose/#adr-002-policies-no-propose","text":"Status: Accepted Decis\u00e3o: avaliar no :propose com policy_trace ; DUAL_CONTROL em *:commit Impacto: menos retrabalho e bloqueios previs\u00edveis","title":"ADR-002 \u2014 Policies no Propose"},{"location":"adr/ADR-TEMPLATE/","text":"ADR-XXX \u2014 Status: Proposed Contexto Decis\u00e3o Alternativas Consequ\u00eancias","title":"ADR-XXX \u2014"},{"location":"adr/ADR-TEMPLATE/#adr-xxx","text":"Status: Proposed Contexto Decis\u00e3o Alternativas Consequ\u00eancias","title":"ADR-XXX \u2014"},{"location":"architecture/apis/","text":"APIs Principais (MVP) POST /v1/work \u2014 enfileira WorkUnit (idempot\u00eancia por idem_key/plan_hash) GET /v1/stream?topic=\u2026 \u2014 SSE de estados GET /v1/receipts/{cid} \u2014 retorna Receipt POST /v1/verify/receipt \u2014 verifica assinatura POST /v1/verify/pack \u2014 verifica VCX-PACK (header/index/trailer/hashes) GET /v1/metrics \u2014 Prometheus POST /v1/export \u2014 Parquet/Arrow/RO-Crate OC (Operador Conversacional) GET /v1/capabilities GET /v1/schema/{schema_id}/{v} POST /v1/oc/parse_intent POST /v1/oc/plan_preview POST /v1/oc/commit UI/UX auxiliares (MVP) GET /v1/ui/plan_card/{plan_hash}?lang=pt|en \u2014 HTML SSR (PlanCard) GET /v1/ui/receipt/{cid}?lang=pt|en \u2014 HTML SSR (Recibo) POST /v1/ux/event \u2014 incrementa ux_events_total{event} Versionamento de API SemVer no header: X-Aurea-Api: 1.0 Quebra: nova rota /v2/* e @ver nos contratos. Cat\u00e1logo de Erros (API) code http descri\u00e7\u00e3o a\u00e7\u00e3o recomendada SCHEMA_INVALID 422 payload inv\u00e1lido corrigir campos faltantes POLICY_BLOCKED 403 bloqueado por policy revisar policy_trace DUAL_CONTROL_REQUIRED 403 confirma\u00e7\u00e3o adicional enviar confirm_phrase IDEM_DUPLICATE 200 job id\u00eantico j\u00e1 executado usar recibo retornado LEASE_EXPIRED 409 worker perdeu lease reenfileirar automaticamente Rate limits e cabe\u00e7alhos recomendados 429 para excesso por tenant/t\u00f3pico Cabe\u00e7alhos: X-Aurea-Api: 1.0 , X-Request-Id , Retry-After Export (detalhes de sa\u00edda) format=parquet \u2192 arquivo ./exports/aurea-export-<ts>.parquet format=arrow \u2192 arquivo ./exports/aurea-export-<ts>.arrow (Arrow IPC file) format=ro-crate \u2192 diret\u00f3rio ./exports/aurea-export-<ts>-rocrate/ com: ro-crate-metadata.json receipts.json Resposta: {status, format, records, path}","title":"APIs"},{"location":"architecture/apis/#apis-principais-mvp","text":"POST /v1/work \u2014 enfileira WorkUnit (idempot\u00eancia por idem_key/plan_hash) GET /v1/stream?topic=\u2026 \u2014 SSE de estados GET /v1/receipts/{cid} \u2014 retorna Receipt POST /v1/verify/receipt \u2014 verifica assinatura POST /v1/verify/pack \u2014 verifica VCX-PACK (header/index/trailer/hashes) GET /v1/metrics \u2014 Prometheus POST /v1/export \u2014 Parquet/Arrow/RO-Crate","title":"APIs Principais (MVP)"},{"location":"architecture/apis/#oc-operador-conversacional","text":"GET /v1/capabilities GET /v1/schema/{schema_id}/{v} POST /v1/oc/parse_intent POST /v1/oc/plan_preview POST /v1/oc/commit","title":"OC (Operador Conversacional)"},{"location":"architecture/apis/#uiux-auxiliares-mvp","text":"GET /v1/ui/plan_card/{plan_hash}?lang=pt|en \u2014 HTML SSR (PlanCard) GET /v1/ui/receipt/{cid}?lang=pt|en \u2014 HTML SSR (Recibo) POST /v1/ux/event \u2014 incrementa ux_events_total{event}","title":"UI/UX auxiliares (MVP)"},{"location":"architecture/apis/#versionamento-de-api","text":"SemVer no header: X-Aurea-Api: 1.0 Quebra: nova rota /v2/* e @ver nos contratos.","title":"Versionamento de API"},{"location":"architecture/apis/#catalogo-de-erros-api","text":"code http descri\u00e7\u00e3o a\u00e7\u00e3o recomendada SCHEMA_INVALID 422 payload inv\u00e1lido corrigir campos faltantes POLICY_BLOCKED 403 bloqueado por policy revisar policy_trace DUAL_CONTROL_REQUIRED 403 confirma\u00e7\u00e3o adicional enviar confirm_phrase IDEM_DUPLICATE 200 job id\u00eantico j\u00e1 executado usar recibo retornado LEASE_EXPIRED 409 worker perdeu lease reenfileirar automaticamente","title":"Cat\u00e1logo de Erros (API)"},{"location":"architecture/apis/#rate-limits-e-cabecalhos-recomendados","text":"429 para excesso por tenant/t\u00f3pico Cabe\u00e7alhos: X-Aurea-Api: 1.0 , X-Request-Id , Retry-After","title":"Rate limits e cabe\u00e7alhos recomendados"},{"location":"architecture/apis/#export-detalhes-de-saida","text":"format=parquet \u2192 arquivo ./exports/aurea-export-<ts>.parquet format=arrow \u2192 arquivo ./exports/aurea-export-<ts>.arrow (Arrow IPC file) format=ro-crate \u2192 diret\u00f3rio ./exports/aurea-export-<ts>-rocrate/ com: ro-crate-metadata.json receipts.json Resposta: {status, format, records, path}","title":"Export (detalhes de sa\u00edda)"},{"location":"architecture/error_codes/","text":"Cat\u00e1logo de Erros (A\u00daREA) SCHEMA_INVALID (422): schema reprovado POLICY_BLOCKED (403): viola\u00e7\u00e3o de pol\u00edtica DUAL_CONTROL_REQUIRED (403): confirma\u00e7\u00e3o adicional PLAN_CONFLICT (409): plan_hash divergiu IDEM_DUPLICATE (200): execu\u00e7\u00e3o id\u00eantica j\u00e1 existe LEASE_EXPIRED (409): lease perdido pelo worker ARTIFACT_VERIFY_FAIL (422): VCX-PACK inv\u00e1lido (hash/offset/trailer)","title":"Errors"},{"location":"architecture/error_codes/#catalogo-de-erros-aurea","text":"SCHEMA_INVALID (422): schema reprovado POLICY_BLOCKED (403): viola\u00e7\u00e3o de pol\u00edtica DUAL_CONTROL_REQUIRED (403): confirma\u00e7\u00e3o adicional PLAN_CONFLICT (409): plan_hash divergiu IDEM_DUPLICATE (200): execu\u00e7\u00e3o id\u00eantica j\u00e1 existe LEASE_EXPIRED (409): lease perdido pelo worker ARTIFACT_VERIFY_FAIL (422): VCX-PACK inv\u00e1lido (hash/offset/trailer)","title":"Cat\u00e1logo de Erros (A\u00daREA)"},{"location":"architecture/oc_spec/","text":"OC \u2014 Especifica\u00e7\u00e3o LLM-friendly (v1.1) Objetos Intent{schema_id:string, v:u32, payload:object} PlanPreview{ dag:{nodes[],edges[]}, plan_hash:string, # blake3(dag_canon) policy_trace:[{rule,ok}], slos:{ttft_ms:u32,ttr_ms:u32}, costs?:{estimate:string,currency?:string}, warnings?:[string] } CommitRequest{plan_hash:string, confirm_phrase?:string} Regras de Conversa\u00e7\u00e3o 1) NL \u2192 parse_intent \u2192 Intent v\u00e1lido (Schema/DoR). 2) plan_preview(Intent) \u2192 PlanPreview (SEM executar). 3) Confirma\u00e7\u00e3o humana \u2192 commit(CommitRequest). Auto-reparo (N=2) Slots ausentes/amb\u00edguos retornam repair_request:{missing:[path],hints:[...]} . O operador s\u00f3 pede CAMPOS faltantes; mant\u00e9m contexto do restante. Ap\u00f3s N=2, retornar SCHEMA_INVALID . Idempot\u00eancia idem_key = plan_hash (se ausente). Repetir commit com mesmo plan_hash \u2192 HTTP 200 + recibo anterior. Policy no :propose Avaliar PII/local-only, janelas, quotas e DUAL_CONTROL. Se DUAL_CONTROL: exigir confirm_phrase no commit. Contratos p/ LLM (extens\u00f5es) JSON Schema com x-llm: {examples:[], defaults:{}, minmax:{}, redact:[\"pii.*\"]} x-ui: {widget:\"select|numeric|code\", unit:\"ms|MB|%\"} C\u00f3digos de erro (OC) SCHEMA_INVALID: campos faltantes/fora de dom\u00ednio POLICY_BLOCKED: pol\u00edtica negou (ver policy_trace) DUAL_CONTROL_REQUIRED: requer confirm_phrase PLAN_CONFLICT: plan_hash mudou entre preview e commit Limites Tamanho m\u00e1ximo de Intent.payload : 256 KiB (MVP). Excedentes: 413 (Payload Too Large).","title":"OC Spec"},{"location":"architecture/oc_spec/#oc-especificacao-llm-friendly-v11","text":"","title":"OC \u2014 Especifica\u00e7\u00e3o LLM-friendly (v1.1)"},{"location":"architecture/oc_spec/#objetos","text":"Intent{schema_id:string, v:u32, payload:object} PlanPreview{ dag:{nodes[],edges[]}, plan_hash:string, # blake3(dag_canon) policy_trace:[{rule,ok}], slos:{ttft_ms:u32,ttr_ms:u32}, costs?:{estimate:string,currency?:string}, warnings?:[string] } CommitRequest{plan_hash:string, confirm_phrase?:string}","title":"Objetos"},{"location":"architecture/oc_spec/#regras-de-conversacao","text":"1) NL \u2192 parse_intent \u2192 Intent v\u00e1lido (Schema/DoR). 2) plan_preview(Intent) \u2192 PlanPreview (SEM executar). 3) Confirma\u00e7\u00e3o humana \u2192 commit(CommitRequest).","title":"Regras de Conversa\u00e7\u00e3o"},{"location":"architecture/oc_spec/#auto-reparo-n2","text":"Slots ausentes/amb\u00edguos retornam repair_request:{missing:[path],hints:[...]} . O operador s\u00f3 pede CAMPOS faltantes; mant\u00e9m contexto do restante. Ap\u00f3s N=2, retornar SCHEMA_INVALID .","title":"Auto-reparo (N=2)"},{"location":"architecture/oc_spec/#idempotencia","text":"idem_key = plan_hash (se ausente). Repetir commit com mesmo plan_hash \u2192 HTTP 200 + recibo anterior.","title":"Idempot\u00eancia"},{"location":"architecture/oc_spec/#policy-no-propose","text":"Avaliar PII/local-only, janelas, quotas e DUAL_CONTROL. Se DUAL_CONTROL: exigir confirm_phrase no commit.","title":"Policy no :propose"},{"location":"architecture/oc_spec/#contratos-p-llm-extensoes","text":"JSON Schema com x-llm: {examples:[], defaults:{}, minmax:{}, redact:[\"pii.*\"]} x-ui: {widget:\"select|numeric|code\", unit:\"ms|MB|%\"}","title":"Contratos p/ LLM (extens\u00f5es)"},{"location":"architecture/oc_spec/#codigos-de-erro-oc","text":"SCHEMA_INVALID: campos faltantes/fora de dom\u00ednio POLICY_BLOCKED: pol\u00edtica negou (ver policy_trace) DUAL_CONTROL_REQUIRED: requer confirm_phrase PLAN_CONFLICT: plan_hash mudou entre preview e commit","title":"C\u00f3digos de erro (OC)"},{"location":"architecture/oc_spec/#limites","text":"Tamanho m\u00e1ximo de Intent.payload : 256 KiB (MVP). Excedentes: 413 (Payload Too Large).","title":"Limites"},{"location":"architecture/overview/","text":"Arquitetura \u2014 Vis\u00e3o Geral Bin\u00e1rio \u00fanico (Axum + Leptos + redb + ed25519) Policies no :propose (pr\u00e9-fila), idempot\u00eancia por plano Leases + reassign; storage redb; m\u00e9tricas Prometheus Artefatos via VCX-PACK; export RO-Crate; \u00e2ncoras Merkle di\u00e1rias","title":"Overview"},{"location":"architecture/overview/#arquitetura-visao-geral","text":"Bin\u00e1rio \u00fanico (Axum + Leptos + redb + ed25519) Policies no :propose (pr\u00e9-fila), idempot\u00eancia por plano Leases + reassign; storage redb; m\u00e9tricas Prometheus Artefatos via VCX-PACK; export RO-Crate; \u00e2ncoras Merkle di\u00e1rias","title":"Arquitetura \u2014 Vis\u00e3o Geral"},{"location":"charter/project_charter/","text":"Project Charter \u2014 AUREA Vis\u00e3o : Plataforma 100% Rust para execu\u00e7\u00e3o determin\u00edstica com recibos assinados, artefatos port\u00e1veis (VCX-PACK) e UX conversacional (OC). Problema : Drift de ambiente, dados sens\u00edveis e falta de trilha verific\u00e1vel. Solu\u00e7\u00e3o : Bus tipado, policies antes da fila, recibos/\u00e2ncoras, packs verific\u00e1veis e PlanCard. M\u00e9tricas (12m) : \u22653 dom\u00ednios ativos; TTFT p95 \u2264 4s; TTR p95 \u2264 9s; \u226510 replays auditados/m\u00eas; \u226560% execu\u00e7\u00f5es com RO-Crate. Escopo MVP : PR-01..PR-10. Fora : QUIC/HSM/DOI externos/dashboards UI.","title":"Charter"},{"location":"charter/project_charter/#project-charter-aurea","text":"Vis\u00e3o : Plataforma 100% Rust para execu\u00e7\u00e3o determin\u00edstica com recibos assinados, artefatos port\u00e1veis (VCX-PACK) e UX conversacional (OC). Problema : Drift de ambiente, dados sens\u00edveis e falta de trilha verific\u00e1vel. Solu\u00e7\u00e3o : Bus tipado, policies antes da fila, recibos/\u00e2ncoras, packs verific\u00e1veis e PlanCard. M\u00e9tricas (12m) : \u22653 dom\u00ednios ativos; TTFT p95 \u2264 4s; TTR p95 \u2264 9s; \u226510 replays auditados/m\u00eas; \u226560% execu\u00e7\u00f5es com RO-Crate. Escopo MVP : PR-01..PR-10. Fora : QUIC/HSM/DOI externos/dashboards UI.","title":"Project Charter \u2014 AUREA"},{"location":"compliance/compliance/","text":"Compliance & Publica\u00e7\u00e3o Licen\u00e7a: Apache-2.0 Auditoria: \u00e2ncoras Merkle di\u00e1rias Publica\u00e7\u00e3o: RO-Crate + CITATION; DOI via integra\u00e7\u00e3o futura (OSF/Figshare/Zenodo)","title":"Compliance &amp; Publica\u00e7\u00e3o"},{"location":"compliance/compliance/#compliance-publicacao","text":"Licen\u00e7a: Apache-2.0 Auditoria: \u00e2ncoras Merkle di\u00e1rias Publica\u00e7\u00e3o: RO-Crate + CITATION; DOI via integra\u00e7\u00e3o futura (OSF/Figshare/Zenodo)","title":"Compliance &amp; Publica\u00e7\u00e3o"},{"location":"compliance/dpia_llm/","text":"DPIA \u2014 LLM & Conversacional (MVP) Base legal : execu\u00e7\u00e3o de contrato e leg\u00edtimo interesse, limitado ao escopo do tenant. Dados tratados : metadados de planos (PlanPreview, policy_trace), recibos (hashes/CIDs), artefatos (VCX-PACK). Minimiza\u00e7\u00e3o : x-llm.redact em schemas; local-only e no-network para PII. Conserva\u00e7\u00e3o : reten\u00e7\u00e3o configur\u00e1vel por dom\u00ednio; GC com verifica\u00e7\u00e3o amostral. Direitos : acesso/retifica\u00e7\u00e3o/elimina\u00e7\u00e3o conforme pol\u00edticas internas do tenant. Controles : assinatura ed25519; \u00e2ncoras Merkle; idempot\u00eancia por plan_hash; auditoria via receipts. Contato : Owner/PM do tenant.","title":"DPIA \u2014 LLM &amp; Conversacional (MVP)"},{"location":"compliance/dpia_llm/#dpia-llm-conversacional-mvp","text":"Base legal : execu\u00e7\u00e3o de contrato e leg\u00edtimo interesse, limitado ao escopo do tenant. Dados tratados : metadados de planos (PlanPreview, policy_trace), recibos (hashes/CIDs), artefatos (VCX-PACK). Minimiza\u00e7\u00e3o : x-llm.redact em schemas; local-only e no-network para PII. Conserva\u00e7\u00e3o : reten\u00e7\u00e3o configur\u00e1vel por dom\u00ednio; GC com verifica\u00e7\u00e3o amostral. Direitos : acesso/retifica\u00e7\u00e3o/elimina\u00e7\u00e3o conforme pol\u00edticas internas do tenant. Controles : assinatura ed25519; \u00e2ncoras Merkle; idempot\u00eancia por plan_hash; auditoria via receipts. Contato : Owner/PM do tenant.","title":"DPIA \u2014 LLM &amp; Conversacional (MVP)"},{"location":"governance/code_of_conduct/","text":"C\u00f3digo de Conduta Esperamos respeito, colabora\u00e7\u00e3o e seguran\u00e7a psicol\u00f3gica. Qualquer viola\u00e7\u00e3o deve ser reportada ao Owner.","title":"C\u00f3digo de Conduta"},{"location":"governance/code_of_conduct/#codigo-de-conduta","text":"Esperamos respeito, colabora\u00e7\u00e3o e seguran\u00e7a psicol\u00f3gica. Qualquer viola\u00e7\u00e3o deve ser reportada ao Owner.","title":"C\u00f3digo de Conduta"},{"location":"governance/contributing/","text":"Contribui\u00e7\u00e3o Rust 1.77+; cargo fmt , clippy , nextest Commits pequenos e at\u00f4micos; usar ADRs para decis\u00f5es PRs vinculados ao plano /.aurea/aurea_pr_plan.json Branch & PR branch: feature/PR-XX-descricao-curta PR title: \"PR-XX \u2014 \" Commits: tipo(scope): resumo (ex: feat(runtime): leases com TTL)","title":"Governance"},{"location":"governance/contributing/#contribuicao","text":"Rust 1.77+; cargo fmt , clippy , nextest Commits pequenos e at\u00f4micos; usar ADRs para decis\u00f5es PRs vinculados ao plano /.aurea/aurea_pr_plan.json","title":"Contribui\u00e7\u00e3o"},{"location":"governance/contributing/#branch-pr","text":"branch: feature/PR-XX-descricao-curta PR title: \"PR-XX \u2014 \" Commits: tipo(scope): resumo (ex: feat(runtime): leases com TTL)","title":"Branch &amp; PR"},{"location":"governance/release_checklist/","text":"Checklist de Release (MVP P0) [ ] PR-01\u2026PR-10 mergeados e tags criadas [ ] mkdocs build --strict OK e site publicado [ ] CI i18n OK [ ] SLOs ativos e alertas no Prometheus [ ] Runbook testado (incidentes e backup/restore) [ ] Export RO-Crate validado em 2 execu\u00e7\u00f5es de exemplo [ ] Pol\u00edtica de reten\u00e7\u00e3o aplicada (dry-run \u2192 apply)","title":"Checklist de Release (MVP P0)"},{"location":"governance/release_checklist/#checklist-de-release-mvp-p0","text":"[ ] PR-01\u2026PR-10 mergeados e tags criadas [ ] mkdocs build --strict OK e site publicado [ ] CI i18n OK [ ] SLOs ativos e alertas no Prometheus [ ] Runbook testado (incidentes e backup/restore) [ ] Export RO-Crate validado em 2 execu\u00e7\u00f5es de exemplo [ ] Pol\u00edtica de reten\u00e7\u00e3o aplicada (dry-run \u2192 apply)","title":"Checklist de Release (MVP P0)"},{"location":"interop/data_refs/","text":"Refer\u00eancias de Dados (DVC/DataLad) Campo opcional data_refs[] no Receipt com hash/URL/tipo Valida\u00e7\u00e3o b\u00e1sica de exist\u00eancia/consist\u00eancia","title":"Data Refs"},{"location":"interop/data_refs/#referencias-de-dados-dvcdatalad","text":"Campo opcional data_refs[] no Receipt com hash/URL/tipo Valida\u00e7\u00e3o b\u00e1sica de exist\u00eancia/consist\u00eancia","title":"Refer\u00eancias de Dados (DVC/DataLad)"},{"location":"interop/ro_crate_mapping/","text":"Mapeamento VCX-PACK \u2192 RO-Crate Manifesto \u2192 ro-crate-metadata.json Entradas \u2192 hasPart[] com hashes/offsets Execu\u00e7\u00e3o \u2192 Workflow Run RO-Crate (inputs/outputs/steps) Implementa\u00e7\u00e3o MVP atual ( POST /v1/export , format=ro-crate ) Dataset raiz ( @id: \"./\" ) com name , datePublished e hasPart Parte principal: receipts.json com snapshot dos recibos exportados Se receipt.artifacts[] existir: adiciona n\u00f3s File ( artifact-N ) com identifier=cid:<pack_cid> e contentSize Metadado obrigat\u00f3rio: ro-crate-metadata.json com conformsTo: https://w3id.org/ro/crate/1.1 Pr\u00f3ximo passo (PR-08 completo) Adicionar mapeamento de PlanPreview para CreateAction/HowToStep Ligar artefatos VCX-PACK ( hasPart ) com sha256 / contentSize","title":"Mapping"},{"location":"interop/ro_crate_mapping/#mapeamento-vcx-pack-ro-crate","text":"Manifesto \u2192 ro-crate-metadata.json Entradas \u2192 hasPart[] com hashes/offsets Execu\u00e7\u00e3o \u2192 Workflow Run RO-Crate (inputs/outputs/steps)","title":"Mapeamento VCX-PACK \u2192 RO-Crate"},{"location":"interop/ro_crate_mapping/#implementacao-mvp-atual-post-v1export-formatro-crate","text":"Dataset raiz ( @id: \"./\" ) com name , datePublished e hasPart Parte principal: receipts.json com snapshot dos recibos exportados Se receipt.artifacts[] existir: adiciona n\u00f3s File ( artifact-N ) com identifier=cid:<pack_cid> e contentSize Metadado obrigat\u00f3rio: ro-crate-metadata.json com conformsTo: https://w3id.org/ro/crate/1.1","title":"Implementa\u00e7\u00e3o MVP atual (POST /v1/export, format=ro-crate)"},{"location":"interop/ro_crate_mapping/#proximo-passo-pr-08-completo","text":"Adicionar mapeamento de PlanPreview para CreateAction/HowToStep Ligar artefatos VCX-PACK ( hasPart ) com sha256 / contentSize","title":"Pr\u00f3ximo passo (PR-08 completo)"},{"location":"interop/ro_crate_examples/","text":"RO-Crate \u2014 Exemplos Exemplo m\u00ednimo: ro-crate-metadata.json + recibo embutido Workflow Run: inputs/outputs/steps mapeados do PlanPreview Gerar exemplo local (MVP) 1) Execute jobs para gerar recibos. 2) Chame: - POST /v1/export com body {\"format\":\"ro-crate\"} 3) Abra o diret\u00f3rio retornado em path : - ro-crate-metadata.json - receipts.json","title":"Examples"},{"location":"interop/ro_crate_examples/#ro-crate-exemplos","text":"Exemplo m\u00ednimo: ro-crate-metadata.json + recibo embutido Workflow Run: inputs/outputs/steps mapeados do PlanPreview","title":"RO-Crate \u2014 Exemplos"},{"location":"interop/ro_crate_examples/#gerar-exemplo-local-mvp","text":"1) Execute jobs para gerar recibos. 2) Chame: - POST /v1/export com body {\"format\":\"ro-crate\"} 3) Abra o diret\u00f3rio retornado em path : - ro-crate-metadata.json - receipts.json","title":"Gerar exemplo local (MVP)"},{"location":"prd/prd/","text":"PRD \u2014 Requisitos de Produto (MVP) Funcionais WorkUnit com idempot\u00eancia por plan_hash Stream: accepted \u2192 assigned \u2192 progress \u2192 result|fail (SSE) Receipt com NRF/CID, policy_trace, tempos por etapa e assinatura ed25519 VCX-PACK com \u00edndice/trailer e verify() OC: list_capabilities, get_schema, parse_intent, plan_preview, commit UI: PlanCard (DAG, SLOs, custos, policy) e Recibo (verify/anchors/export) Export: RO-Crate + Workflow Run N\u00e3o-funcionais Determinismo: replays id\u00eanticos (ou thresholds documentados para m\u00eddia) Seguran\u00e7a: DUAL_CONTROL *:commit ; local-only para PII Observabilidade: Prometheus + Parquet/Arrow; SLIs publicados","title":"PRD"},{"location":"prd/prd/#prd-requisitos-de-produto-mvp","text":"","title":"PRD \u2014 Requisitos de Produto (MVP)"},{"location":"prd/prd/#funcionais","text":"WorkUnit com idempot\u00eancia por plan_hash Stream: accepted \u2192 assigned \u2192 progress \u2192 result|fail (SSE) Receipt com NRF/CID, policy_trace, tempos por etapa e assinatura ed25519 VCX-PACK com \u00edndice/trailer e verify() OC: list_capabilities, get_schema, parse_intent, plan_preview, commit UI: PlanCard (DAG, SLOs, custos, policy) e Recibo (verify/anchors/export) Export: RO-Crate + Workflow Run","title":"Funcionais"},{"location":"prd/prd/#nao-funcionais","text":"Determinismo: replays id\u00eanticos (ou thresholds documentados para m\u00eddia) Seguran\u00e7a: DUAL_CONTROL *:commit ; local-only para PII Observabilidade: Prometheus + Parquet/Arrow; SLIs publicados","title":"N\u00e3o-funcionais"},{"location":"qa/canon_fixtures/","text":"Canonical JSON Fixtures ProjetoFinal.md define o baseline e estes fixtures s\u00e3o a refer\u00eancia can\u00f4nica para valida\u00e7\u00e3o de canonicaliza\u00e7\u00e3o JSON/NRF. Localiza\u00e7\u00e3o qa/fixtures/canon/jcs_vectors_ok.json qa/fixtures/canon/jcs_vectors_err.json qa/fixtures/canon/profile_null_strip.json qa/fixtures/canon/profile_num_norm.json Cobertura jcs_vectors_ok.json : casos v\u00e1lidos de ordena\u00e7\u00e3o/chars Unicode. jcs_vectors_err.json : entradas inv\u00e1lidas que devem falhar com SCHEMA_INVALID . profile_null_strip.json : perfil com remo\u00e7\u00e3o de null . profile_num_norm.json : perfil com normaliza\u00e7\u00e3o num\u00e9rica ( 1.0 -> 1 , -0.0 -> 0 ). Regra Qualquer implementa\u00e7\u00e3o de canonicaliza\u00e7\u00e3o usada para NRF/CID deve passar todos os vetores acima sem diverg\u00eancia.","title":"QA Canon Fixtures"},{"location":"qa/canon_fixtures/#canonical-json-fixtures","text":"ProjetoFinal.md define o baseline e estes fixtures s\u00e3o a refer\u00eancia can\u00f4nica para valida\u00e7\u00e3o de canonicaliza\u00e7\u00e3o JSON/NRF.","title":"Canonical JSON Fixtures"},{"location":"qa/canon_fixtures/#localizacao","text":"qa/fixtures/canon/jcs_vectors_ok.json qa/fixtures/canon/jcs_vectors_err.json qa/fixtures/canon/profile_null_strip.json qa/fixtures/canon/profile_num_norm.json","title":"Localiza\u00e7\u00e3o"},{"location":"qa/canon_fixtures/#cobertura","text":"jcs_vectors_ok.json : casos v\u00e1lidos de ordena\u00e7\u00e3o/chars Unicode. jcs_vectors_err.json : entradas inv\u00e1lidas que devem falhar com SCHEMA_INVALID . profile_null_strip.json : perfil com remo\u00e7\u00e3o de null . profile_num_norm.json : perfil com normaliza\u00e7\u00e3o num\u00e9rica ( 1.0 -> 1 , -0.0 -> 0 ).","title":"Cobertura"},{"location":"qa/canon_fixtures/#regra","text":"Qualquer implementa\u00e7\u00e3o de canonicaliza\u00e7\u00e3o usada para NRF/CID deve passar todos os vetores acima sem diverg\u00eancia.","title":"Regra"},{"location":"qa/strategy/","text":"QA & Estrat\u00e9gia de Testes Unit: canon/hash, cid, valida\u00e7\u00e3o de schema Integra\u00e7\u00e3o: leases/reassign, assinatura/verify, OC propose/commit idempotente E2E: fala\u2192PlanCard\u2192confirmar\u2192stream\u2192Recibo Determinismo: KATs por dom\u00ednio (ci\u00eancia/HDL bit-a-bit; m\u00eddia com thresholds) Chaos (staging): lat\u00eancia/falha seedada; SLOs mantidos Canon JSON (baseline): rodar vetores em qa/fixtures/canon/ para casos ok , err , null_strip e num_norm Usabilidade (guiado) Cen\u00e1rio 1: VCX: preencher slots faltantes (auto-reparo) \u2192 confirmar \u2192 verificar recibo Cen\u00e1rio 2: POLICY_BLOCKED \u2192 ajustar janela/local-only \u2192 confirmar Cen\u00e1rio 3: Repetir plano (idempot\u00eancia) \u2192 confirmar recibo reaproveitado Determinismo Ci\u00eancia/HDL: byte-a-byte M\u00eddia: PSNR \u2265 45 dB OU SSIM \u2265 0.995 (registrar no recibo)","title":"QA"},{"location":"qa/strategy/#qa-estrategia-de-testes","text":"Unit: canon/hash, cid, valida\u00e7\u00e3o de schema Integra\u00e7\u00e3o: leases/reassign, assinatura/verify, OC propose/commit idempotente E2E: fala\u2192PlanCard\u2192confirmar\u2192stream\u2192Recibo Determinismo: KATs por dom\u00ednio (ci\u00eancia/HDL bit-a-bit; m\u00eddia com thresholds) Chaos (staging): lat\u00eancia/falha seedada; SLOs mantidos Canon JSON (baseline): rodar vetores em qa/fixtures/canon/ para casos ok , err , null_strip e num_norm","title":"QA &amp; Estrat\u00e9gia de Testes"},{"location":"qa/strategy/#usabilidade-guiado","text":"Cen\u00e1rio 1: VCX: preencher slots faltantes (auto-reparo) \u2192 confirmar \u2192 verificar recibo Cen\u00e1rio 2: POLICY_BLOCKED \u2192 ajustar janela/local-only \u2192 confirmar Cen\u00e1rio 3: Repetir plano (idempot\u00eancia) \u2192 confirmar recibo reaproveitado","title":"Usabilidade (guiado)"},{"location":"qa/strategy/#determinismo","text":"Ci\u00eancia/HDL: byte-a-byte M\u00eddia: PSNR \u2265 45 dB OU SSIM \u2265 0.995 (registrar no recibo)","title":"Determinismo"},{"location":"qa/usability_scripts/","text":"Roteiros de Usabilidade (5\u20137 min) 1) Criar plano VCX, editar slots, confirmar, ver Recibo 2) Rodar experimento cient\u00edfico e exportar RO-Crate 3) Simular erro de policy e ajustar via PlanCard","title":"Roteiros de Usabilidade (5\u20137 min)"},{"location":"qa/usability_scripts/#roteiros-de-usabilidade-57-min","text":"1) Criar plano VCX, editar slots, confirmar, ver Recibo 2) Rodar experimento cient\u00edfico e exportar RO-Crate 3) Simular erro de policy e ajustar via PlanCard","title":"Roteiros de Usabilidade (5\u20137 min)"},{"location":"runbook/backup_restore/","text":"Backup & Restore Backup: snapshot redb + dump de \u00e2ncoras e recibos (Parquet) Restore: restaurar redb; verificar /v1/metrics e amostras de recibos Checklist p\u00f3s-restore: \u00e2ncoras do dia e verify() de packs","title":"Backup/Restore"},{"location":"runbook/backup_restore/#backup-restore","text":"Backup: snapshot redb + dump de \u00e2ncoras e recibos (Parquet) Restore: restaurar redb; verificar /v1/metrics e amostras de recibos Checklist p\u00f3s-restore: \u00e2ncoras do dia e verify() de packs","title":"Backup &amp; Restore"},{"location":"runbook/incidents/","text":"Runbook de Incidentes (v1.1) 1) Jobs presos / Reassign em massa Verificar queue_depth e reassigns_total em /v1/metrics For\u00e7ar varredura de leases expirados ( aurea runtime sweep --expired --db ./aurea.redb ) Confirmar retomada no stream SSE 2) Assinatura inv\u00e1lida de recibo POST /v1/verify/receipt e inspecionar kid Recarregar chave p\u00fablica correspondente Revalidar; se falhar: isolar dia e recomputar Merkle 3) \u00c2ncora do dia ausente/corrompida Rodar aurea anchors rebuild --db ./aurea.redb --date YYYY-MM-DD --out-dir ./anchors Publicar novo root; registrar incidente 4) GC de packs Executar pol\u00edtica de reten\u00e7\u00e3o: aurea retention receipts --db ./aurea.redb --older-than-days 30 aurea retention receipts --db ./aurea.redb --older-than-days 30 --apply Rodar verify() em amostras e checar recibos impactados","title":"Incidents"},{"location":"runbook/incidents/#runbook-de-incidentes-v11","text":"","title":"Runbook de Incidentes (v1.1)"},{"location":"runbook/incidents/#1-jobs-presos-reassign-em-massa","text":"Verificar queue_depth e reassigns_total em /v1/metrics For\u00e7ar varredura de leases expirados ( aurea runtime sweep --expired --db ./aurea.redb ) Confirmar retomada no stream SSE","title":"1) Jobs presos / Reassign em massa"},{"location":"runbook/incidents/#2-assinatura-invalida-de-recibo","text":"POST /v1/verify/receipt e inspecionar kid Recarregar chave p\u00fablica correspondente Revalidar; se falhar: isolar dia e recomputar Merkle","title":"2) Assinatura inv\u00e1lida de recibo"},{"location":"runbook/incidents/#3-ancora-do-dia-ausentecorrompida","text":"Rodar aurea anchors rebuild --db ./aurea.redb --date YYYY-MM-DD --out-dir ./anchors Publicar novo root; registrar incidente","title":"3) \u00c2ncora do dia ausente/corrompida"},{"location":"runbook/incidents/#4-gc-de-packs","text":"Executar pol\u00edtica de reten\u00e7\u00e3o: aurea retention receipts --db ./aurea.redb --older-than-days 30 aurea retention receipts --db ./aurea.redb --older-than-days 30 --apply Rodar verify() em amostras e checar recibos impactados","title":"4) GC de packs"},{"location":"runbook/operations/","text":"Opera\u00e7\u00e3o Start: aurea serve --db ./aurea.redb --listen 0.0.0.0:8080 Keys: aurea keys rotate Leases expirados: aurea runtime sweep --expired --db ./aurea.redb Rebuild de \u00e2ncora di\u00e1ria: aurea anchors rebuild --db ./aurea.redb --date YYYY-MM-DD --out-dir ./anchors Reten\u00e7\u00e3o (dry-run): aurea retention receipts --db ./aurea.redb --older-than-days 30 Reten\u00e7\u00e3o (apply): aurea retention receipts --db ./aurea.redb --older-than-days 30 --apply Backups: snapshots de redb + exports Parquet Alertas SLO: carregar configs/prometheus/aurea-alerts.yml no Prometheus ( promtool check rules + /-/reload ) Supervisor (PMDaemon) Start: aurea-pmdaemon --cmd target/debug/aurea --arg0 serve --listen 0.0.0.0:8080 --db ./aurea.redb --keys-dir ./keys Health defaults: health_url=http://127.0.0.1:<port>/healthz health_grace_ms=5000 , health_interval_ms=1500 , health_timeout_ms=2000 max_consecutive_health_failures=3 Restart/backoff: backoff exponencial (1s, 2s, 4s, ...) com teto de 30s rota\u00e7\u00e3o de aurea.out.log e aurea.err.log a cada restart Teste manual PMDaemon Subir aurea-pmdaemon apontando para um db tempor\u00e1rio. Confirmar /healthz respondendo em 200. For\u00e7ar falha no child (kill do processo aurea ) e verificar restart com backoff. Simular health inv\u00e1lido ( --health-url incorreto) e verificar restart por max_consecutive_health_failures . Backup transacional (recomendado) 1) Pausar ingest (modo leitura): aurea serve --read-only ou flag admin 2) Executar snapshot do redb 3) Retomar ingest; registrar hor\u00e1rio e vers\u00e3o","title":"Operations"},{"location":"runbook/operations/#operacao","text":"Start: aurea serve --db ./aurea.redb --listen 0.0.0.0:8080 Keys: aurea keys rotate Leases expirados: aurea runtime sweep --expired --db ./aurea.redb Rebuild de \u00e2ncora di\u00e1ria: aurea anchors rebuild --db ./aurea.redb --date YYYY-MM-DD --out-dir ./anchors Reten\u00e7\u00e3o (dry-run): aurea retention receipts --db ./aurea.redb --older-than-days 30 Reten\u00e7\u00e3o (apply): aurea retention receipts --db ./aurea.redb --older-than-days 30 --apply Backups: snapshots de redb + exports Parquet Alertas SLO: carregar configs/prometheus/aurea-alerts.yml no Prometheus ( promtool check rules + /-/reload )","title":"Opera\u00e7\u00e3o"},{"location":"runbook/operations/#supervisor-pmdaemon","text":"Start: aurea-pmdaemon --cmd target/debug/aurea --arg0 serve --listen 0.0.0.0:8080 --db ./aurea.redb --keys-dir ./keys Health defaults: health_url=http://127.0.0.1:<port>/healthz health_grace_ms=5000 , health_interval_ms=1500 , health_timeout_ms=2000 max_consecutive_health_failures=3 Restart/backoff: backoff exponencial (1s, 2s, 4s, ...) com teto de 30s rota\u00e7\u00e3o de aurea.out.log e aurea.err.log a cada restart","title":"Supervisor (PMDaemon)"},{"location":"runbook/operations/#teste-manual-pmdaemon","text":"Subir aurea-pmdaemon apontando para um db tempor\u00e1rio. Confirmar /healthz respondendo em 200. For\u00e7ar falha no child (kill do processo aurea ) e verificar restart com backoff. Simular health inv\u00e1lido ( --health-url incorreto) e verificar restart por max_consecutive_health_failures .","title":"Teste manual PMDaemon"},{"location":"runbook/operations/#backup-transacional-recomendado","text":"1) Pausar ingest (modo leitura): aurea serve --read-only ou flag admin 2) Executar snapshot do redb 3) Retomar ingest; registrar hor\u00e1rio e vers\u00e3o","title":"Backup transacional (recomendado)"},{"location":"security/key_rotation/","text":"Rota\u00e7\u00e3o de Chaves \u2014 Procedimento 1) Gerar nova chave ( aurea keys rotate ) 2) Publicar chave p\u00fablica e kid 3) Verificar recibos antigos e novos 4) Rollback: reverter current para o kid anterior","title":"Rota\u00e7\u00e3o de Chaves \u2014 Procedimento"},{"location":"security/key_rotation/#rotacao-de-chaves-procedimento","text":"1) Gerar nova chave ( aurea keys rotate ) 2) Publicar chave p\u00fablica e kid 3) Verificar recibos antigos e novos 4) Rollback: reverter current para o kid anterior","title":"Rota\u00e7\u00e3o de Chaves \u2014 Procedimento"},{"location":"security/security_privacy/","text":"Seguran\u00e7a & Privacidade Assinaturas ed25519; kid rotativo; /v1/verify/receipt PII/local-only com roteamento autom\u00e1tico; no-network quando exigido DUAL_CONTROL com frase de confirma\u00e7\u00e3o e carimbo no policy_trace Reten\u00e7\u00e3o e GC de packs/recibos Modelo de Amea\u00e7as (resumo) Integridade de recibos: ed25519 + Merkle di\u00e1rio. Replay/duplicidade: idem_key(plan_hash). Exfiltra\u00e7\u00e3o de PII: policy local-only + no-network. Gest\u00e3o de Chaves Gera\u00e7\u00e3o on-boot; kid=YYYYMMDD-HHMM . Rota\u00e7\u00e3o: semanal (staging), mensal (prod) ou a cada N recibos. Procedimento e rollback em security/key_rotation.md . STRIDE (resumo) Amea\u00e7a Risco Mitiga\u00e7\u00e3o Spoofing Impersona\u00e7\u00e3o de worker chaves/leases; rotas outbound; verify assinatura Tampering Altera\u00e7\u00e3o de recibo/pack ed25519 + Merkle + verify() Repudiation Negar execu\u00e7\u00e3o recibos assinados, anchors di\u00e1rias Information Disclosure Exfiltra\u00e7\u00e3o/PII policy local-only + no-network Denial of Service Satura\u00e7\u00e3o da fila quotas, rate limit, reassign Elevation of Privilege Execu\u00e7\u00e3o n\u00e3o autorizada policies por t\u00f3pico + DUAL_CONTROL","title":"Security"},{"location":"security/security_privacy/#seguranca-privacidade","text":"Assinaturas ed25519; kid rotativo; /v1/verify/receipt PII/local-only com roteamento autom\u00e1tico; no-network quando exigido DUAL_CONTROL com frase de confirma\u00e7\u00e3o e carimbo no policy_trace Reten\u00e7\u00e3o e GC de packs/recibos","title":"Seguran\u00e7a &amp; Privacidade"},{"location":"security/security_privacy/#modelo-de-ameacas-resumo","text":"Integridade de recibos: ed25519 + Merkle di\u00e1rio. Replay/duplicidade: idem_key(plan_hash). Exfiltra\u00e7\u00e3o de PII: policy local-only + no-network.","title":"Modelo de Amea\u00e7as (resumo)"},{"location":"security/security_privacy/#gestao-de-chaves","text":"Gera\u00e7\u00e3o on-boot; kid=YYYYMMDD-HHMM . Rota\u00e7\u00e3o: semanal (staging), mensal (prod) ou a cada N recibos. Procedimento e rollback em security/key_rotation.md .","title":"Gest\u00e3o de Chaves"},{"location":"security/security_privacy/#stride-resumo","text":"Amea\u00e7a Risco Mitiga\u00e7\u00e3o Spoofing Impersona\u00e7\u00e3o de worker chaves/leases; rotas outbound; verify assinatura Tampering Altera\u00e7\u00e3o de recibo/pack ed25519 + Merkle + verify() Repudiation Negar execu\u00e7\u00e3o recibos assinados, anchors di\u00e1rias Information Disclosure Exfiltra\u00e7\u00e3o/PII policy local-only + no-network Denial of Service Satura\u00e7\u00e3o da fila quotas, rate limit, reassign Elevation of Privilege Execu\u00e7\u00e3o n\u00e3o autorizada policies por t\u00f3pico + DUAL_CONTROL","title":"STRIDE (resumo)"},{"location":"slo/metrics/","text":"M\u00e9tricas & Export Prometheus em /v1/metrics Exports em /v1/export (Parquet/Arrow) Regras SLO (Prometheus) Arquivo de regras: configs/prometheus/aurea-alerts.yml AureaTTFTP95High : histogram_quantile(0.95, sum(rate(ttft_ms_bucket[15m])) by (le)) > 4000 AureaTTRP95High : histogram_quantile(0.95, sum(rate(ttr_ms_bucket[15m])) by (le)) > 9000 AureaErrorRateHigh : max_over_time(error_rate{code=\"runtime_fail\"}[10m]) > 0.02","title":"M\u00e9tricas &amp; Export"},{"location":"slo/metrics/#metricas-export","text":"Prometheus em /v1/metrics Exports em /v1/export (Parquet/Arrow)","title":"M\u00e9tricas &amp; Export"},{"location":"slo/metrics/#regras-slo-prometheus","text":"Arquivo de regras: configs/prometheus/aurea-alerts.yml AureaTTFTP95High : histogram_quantile(0.95, sum(rate(ttft_ms_bucket[15m])) by (le)) > 4000 AureaTTRP95High : histogram_quantile(0.95, sum(rate(ttr_ms_bucket[15m])) by (le)) > 9000 AureaErrorRateHigh : max_over_time(error_rate{code=\"runtime_fail\"}[10m]) > 0.02","title":"Regras SLO (Prometheus)"},{"location":"slo/slis_slos/","text":"SLIs & SLOs SLIs: ttft_ms, ttr_ms, queue_depth, reassigns_total, error_rate{code}, stage_time_ms{stage} SLOs MVP: TTFT p95 \u2264 4s; TTR p95 \u2264 9s; error_rate < 2% Alertas (recomendado) ttft_ms_p95 > 4s por 15min \u2192 WARN ttr_ms_p95 > 9s por 15min \u2192 WARN error_rate > 2% por 10min \u2192 ALERT Regras versionadas: configs/prometheus/aurea-alerts.yml Valida\u00e7\u00e3o local: promtool check rules configs/prometheus/aurea-alerts.yml Or\u00e7amentos por tenant (exemplo) tokens_m\u00eas, tempo_cpu_ms_m\u00eas (rejeitar preview > or\u00e7amento) Cobertura de KATs (meta) \u226595% dos pipelines cr\u00edticos por dom\u00ednio com KAT definido e executado em CI","title":"SLO"},{"location":"slo/slis_slos/#slis-slos","text":"SLIs: ttft_ms, ttr_ms, queue_depth, reassigns_total, error_rate{code}, stage_time_ms{stage} SLOs MVP: TTFT p95 \u2264 4s; TTR p95 \u2264 9s; error_rate < 2%","title":"SLIs &amp; SLOs"},{"location":"slo/slis_slos/#alertas-recomendado","text":"ttft_ms_p95 > 4s por 15min \u2192 WARN ttr_ms_p95 > 9s por 15min \u2192 WARN error_rate > 2% por 10min \u2192 ALERT Regras versionadas: configs/prometheus/aurea-alerts.yml Valida\u00e7\u00e3o local: promtool check rules configs/prometheus/aurea-alerts.yml","title":"Alertas (recomendado)"},{"location":"slo/slis_slos/#orcamentos-por-tenant-exemplo","text":"tokens_m\u00eas, tempo_cpu_ms_m\u00eas (rejeitar preview > or\u00e7amento)","title":"Or\u00e7amentos por tenant (exemplo)"},{"location":"slo/slis_slos/#cobertura-de-kats-meta","text":"\u226595% dos pipelines cr\u00edticos por dom\u00ednio com KAT definido e executado em CI","title":"Cobertura de KATs (meta)"},{"location":"sow/statement_of_work/","text":"Declara\u00e7\u00e3o de Escopo (SoW) Entreg\u00e1veis MVP - Bin\u00e1rio aurea (API+UI+fila/assinatura/m\u00e9tricas) - OC endpoints (Intent \u2192 PlanPreview \u2192 Commit) - VCX-PACK com trailer+verify, integrado ao Receipt - UI PWA (PlanCard e Recibo completo) - Export RO-Crate + CITATION Crit\u00e9rios de aceite : ver slo/ e qa/ .","title":"SoW"},{"location":"sow/statement_of_work/#declaracao-de-escopo-sow","text":"Entreg\u00e1veis MVP - Bin\u00e1rio aurea (API+UI+fila/assinatura/m\u00e9tricas) - OC endpoints (Intent \u2192 PlanPreview \u2192 Commit) - VCX-PACK com trailer+verify, integrado ao Receipt - UI PWA (PlanCard e Recibo completo) - Export RO-Crate + CITATION Crit\u00e9rios de aceite : ver slo/ e qa/ .","title":"Declara\u00e7\u00e3o de Escopo (SoW)"},{"location":"ux/checklist_pr10/","text":"Checklist de UX \u2014 PR-10 (aceite) [ ] Teclado 100% (sem traps) e foco vis\u00edvel [ ] ARIA roles/labels; contraste AA [ ] Mapa error_code\u2192mensagem (PT/EN) [ ] Badge local-only + tooltip [ ] PlanCard: DAG/SLOs/custos/policy_trace [ ] Recibo: assinatura/\u00e2ncora/artefatos (download/verify/export)","title":"Checklist PR-10"},{"location":"ux/checklist_pr10/#checklist-de-ux-pr-10-aceite","text":"[ ] Teclado 100% (sem traps) e foco vis\u00edvel [ ] ARIA roles/labels; contraste AA [ ] Mapa error_code\u2192mensagem (PT/EN) [ ] Badge local-only + tooltip [ ] PlanCard: DAG/SLOs/custos/policy_trace [ ] Recibo: assinatura/\u00e2ncora/artefatos (download/verify/export)","title":"Checklist de UX \u2014 PR-10 (aceite)"},{"location":"ux/microcopy/","text":"Microcopy \u2014 Padr\u00f5es (v1.1) A\u00e7\u00f5es Confirmar: \"Conferi e confirmo o plano.\" Editar: \"Ajustar par\u00e2metros\" Agendar: \"Executar mais tarde\" Repetir: \"Repetir execu\u00e7\u00e3o (mesmo plano)\" Estados Preview vazio: \"Envie os detalhes ou escolha um template.\" Em execu\u00e7\u00e3o: \"Seu job est\u00e1 processando. Acompanhe o progresso aqui.\" Sucesso: \"Pronto! O recibo est\u00e1 assinado e dispon\u00edvel abaixo.\" Erro geral: \"N\u00e3o deu certo desta vez. Veja os detalhes e tente novamente.\" Tooltips policy_trace: \"Regras avaliadas antes da execu\u00e7\u00e3o.\" local-only: \"Executa estritamente no ambiente local.\" Erros (mapa code\u2192mensagem humana) SCHEMA_INVALID \u2192 \"Faltam informa\u00e7\u00f5es. Complete os campos destacados.\" POLICY_BLOCKED \u2192 \"Este plano viola uma pol\u00edtica. Veja as regras aplicadas.\" DUAL_CONTROL_REQUIRED \u2192 \"Confirma\u00e7\u00e3o adicional \u00e9 necess\u00e1ria para continuar.\" PLAN_CONFLICT \u2192 \"O plano mudou. Atualize o cart\u00e3o e confirme novamente.\"","title":"Microcopy"},{"location":"ux/microcopy/#microcopy-padroes-v11","text":"","title":"Microcopy \u2014 Padr\u00f5es (v1.1)"},{"location":"ux/microcopy/#acoes","text":"Confirmar: \"Conferi e confirmo o plano.\" Editar: \"Ajustar par\u00e2metros\" Agendar: \"Executar mais tarde\" Repetir: \"Repetir execu\u00e7\u00e3o (mesmo plano)\"","title":"A\u00e7\u00f5es"},{"location":"ux/microcopy/#estados","text":"Preview vazio: \"Envie os detalhes ou escolha um template.\" Em execu\u00e7\u00e3o: \"Seu job est\u00e1 processando. Acompanhe o progresso aqui.\" Sucesso: \"Pronto! O recibo est\u00e1 assinado e dispon\u00edvel abaixo.\" Erro geral: \"N\u00e3o deu certo desta vez. Veja os detalhes e tente novamente.\"","title":"Estados"},{"location":"ux/microcopy/#tooltips","text":"policy_trace: \"Regras avaliadas antes da execu\u00e7\u00e3o.\" local-only: \"Executa estritamente no ambiente local.\"","title":"Tooltips"},{"location":"ux/microcopy/#erros-mapa-codemensagem-humana","text":"SCHEMA_INVALID \u2192 \"Faltam informa\u00e7\u00f5es. Complete os campos destacados.\" POLICY_BLOCKED \u2192 \"Este plano viola uma pol\u00edtica. Veja as regras aplicadas.\" DUAL_CONTROL_REQUIRED \u2192 \"Confirma\u00e7\u00e3o adicional \u00e9 necess\u00e1ria para continuar.\" PLAN_CONFLICT \u2192 \"O plano mudou. Atualize o cart\u00e3o e confirme novamente.\"","title":"Erros (mapa code\u2192mensagem humana)"},{"location":"ux/plan_card_spec/","text":"PlanCard \u2014 Especifica\u00e7\u00e3o de UX Campos: DAG (resumo), SLOs, custos, policy_trace A\u00e7\u00f5es: Confirmar / Editar / Agendar Badge local-only quando aplic\u00e1vel Erros: mapa error_code \u2192 mensagem (PT/EN)","title":"PlanCard"},{"location":"ux/plan_card_spec/#plancard-especificacao-de-ux","text":"Campos: DAG (resumo), SLOs, custos, policy_trace A\u00e7\u00f5es: Confirmar / Editar / Agendar Badge local-only quando aplic\u00e1vel Erros: mapa error_code \u2192 mensagem (PT/EN)","title":"PlanCard \u2014 Especifica\u00e7\u00e3o de UX"},{"location":"ux/ux_checklist/","text":"Checklist de UX \u2014 PR-10 Teclado e foco vis\u00edvel; ARIA labels/roles; contraste AA PlanCard com DAG, SLOs, custos, policy_trace (tooltip) Recibo com assinatura/\u00e2ncora/artefatos (download/verify/export) i18n PT/EN com checagem de chaves no CI","title":"Checklist de UX \u2014 PR-10"},{"location":"ux/ux_checklist/#checklist-de-ux-pr-10","text":"Teclado e foco vis\u00edvel; ARIA labels/roles; contraste AA PlanCard com DAG, SLOs, custos, policy_trace (tooltip) Recibo com assinatura/\u00e2ncora/artefatos (download/verify/export) i18n PT/EN com checagem de chaves no CI","title":"Checklist de UX \u2014 PR-10"}]}